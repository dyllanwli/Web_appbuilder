// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Directions/setting/PresetDestinations":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/query esri/lang esri/tasks/locator dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./PresetDestinations.html esri/dijit/Search jimu/dijit/RadioBtn".split(" "),function(t,h,f,m,v,y,n,q,x,z,r,c){return t([q,x,z],{templateString:r,_defaultLocations:null,_startSearchResults:null,_endSearchResults:null,_isSearchResultsShown:!1,
_ERROR_CLASS:"have-error",constructor:function(d){d&&(this._defaultLocations=d.defaultLocations,this.nls=d.nls)},postCreate:function(){this.inherited(arguments)},startup:function(){this.startSearch=new c({enableSuggestions:!1,enableButtonMode:!1,theme:"arcgisSearch"});this.startSearch.placeAt(this.startSearchDom);this.own(f(this.startSearch,"search-results",h.hitch(this,"_onStartSearchResults")));this.own(f(this.startSearchResultsNode,"li:click",h.hitch(this,"_onSelectStartSearchResult")));this.own(f(this.startSearch.inputNode,
"focus",h.hitch(this,"_onCleanStartError")));this.own(f(this.startSearch.inputNode,"blur",h.hitch(this,function(){!1===this._isSearchResultsShown&&this.startSearch&&this.startSearch.search&&this.startSearch.search()})));this.endSearch=new c({enableSuggestions:!1,enableButtonMode:!1,theme:"arcgisSearch"});this.endSearch.placeAt(this.endSearchDom);this.own(f(this.endSearch,"search-results",h.hitch(this,"_onEndSearchResults")));this.own(f(this.endSearchResultsNode,"li:click",h.hitch(this,"_onSelectEndSearchResult")));
this.own(f(this.endSearch.inputNode,"focus",h.hitch(this,"_onCleanEndError")));this.own(f(this.endSearch.inputNode,"blur",h.hitch(this,function(){!1===this._isSearchResultsShown&&this.endSearch&&this.endSearch.search&&this.endSearch.search()})));this.own(f(window.document,"click",h.hitch(this,function(b){m.isDescendant(b.target,this.searchResultsNode)||this._hideResultMenu()})));if(this._defaultLocations&&this._defaultLocations.length&&0<this._defaultLocations.length)for(var d=0,b=this._defaultLocations.length;d<
b;d++)0===d?this.startSearch.set("value",this.defaultLocations[d]):1===d&&this.endSearch.set("value",this.defaultLocations[d]);this.inherited(arguments)},getValue:function(){var d=[],b=this.startSearch.get("value");d.push(b);b=this.endSearch.get("value");d.push(b);return d},setValue:function(d){d&&0<d.length&&(this._defaultLocations=d)},validate:function(){var d=!1;v(".searchLoading",this.domNode).forEach(h.hitch(this,function(){d=!0}));return!1!==d||m.hasClass(this.startSearch,this._ERROR_CLASS)||
m.hasClass(this.endSearch,this._ERROR_CLASS)?!1:!0},setSources:function(d){d&&d.url&&d.singleLineFieldName?(d={locator:new n(d.url||""),outFields:["*"],singleLineFieldName:d.singleLineFieldName},this.startSearch.set("sources",[d]),this.endSearch.set("sources",[d])):(this.startSearch.set("sources",[]),this.endSearch.set("sources",[]))},_onCleanError:function(d){m.removeClass(d,this._ERROR_CLASS)},_onCleanStartError:function(){this._onCleanError(this.startSearch)},_onCleanEndError:function(){this._onCleanError(this.endSearch)},
_onStartSearchResults:function(d){this._onSearchResults(d,{searchDijit:this.startSearch,searchResultsNode:this.startSearchResultsNode,searchError:this.startSearchError,results:"start"})},_onEndSearchResults:function(d){this._onSearchResults(d,{searchDijit:this.endSearch,searchResultsNode:this.endSearchResultsNode,searchError:this.endSearchError,results:"end"})},_onSearchResults:function(d,b){var k=b.searchDijit.get("sources"),c=b.searchDijit.get("activeSourceIndex"),f=b.searchDijit.get("value"),h=
"",r=d.results;if(""!==f)if(r&&0<d.numResults){"start"===b.results?this._startSearchResults=r:"end"===b.results&&(this._endSearchResults=r);var h=h+'\x3cdiv class\x3d"searchMenu searchResultsMenu" role\x3d"menu"\x3e',q;for(q in r)if(r[q]&&r[q].length){var n=k[parseInt(q,10)].name;1<k.length&&"all"===c&&(h+='\x3cdiv title\x3d"'+n+'" class\x3d"menuHeader"\x3e'+n+"\x3c/div\x3e");for(var h=h+"\x3cul\x3e",n=new RegExp("("+f+")","gi"),v=k[q].maxResults||5,w=0,t=r[q].length;w<t&&w<v;w++)var x=y.isDefined(r[q][w].name)?
r[q][w].name:this.nls.untitled,h=h+('\x3cli title\x3d"'+x+'" data-index\x3d"'+w+'" data-source-index\x3d"'+q+'" role\x3d"menuitem" tabindex\x3d"0"\x3e'+x.toString().replace(n,"\x3cstrong \x3e$1\x3c/strong\x3e")+"\x3c/li\x3e");h+="\x3c/url\x3e"}b.searchResultsNode.innerHTML=h+"\x3c/div\x3e";this._showResultMenu(b.searchDijit,b.searchResultsNode);this._resetSelectorPosition(b.searchDijit,".searchResultsMenu")}else m.addClass(b.searchDijit,this._ERROR_CLASS),this._resetSelectorPosition(b.searchDijit,
".noResultsMenu")},_onSelectStartSearchResult:function(d){this._onSelectSearchResult(d,this.startSearch,this._startSearchResults)},_onSelectEndSearchResult:function(d){this._onSelectSearchResult(d,this.endSearch,this._endSearchResults)},_onSelectSearchResult:function(d,b,k){for(d=d.target;!m.hasAttr(d,"data-source-index")||!m.getAttr(d,"data-index");)d=d.parentNode;var c=null,c=m.getAttr(d,"data-source-index");d=parseInt(m.getAttr(d,"data-index"),10);"all"!==c&&(c=parseInt(c,10));k&&k[c]&&k[c][d]&&
(c=k[c][d],b.select(c),c.name&&b.set("value",c.name))},_showResultMenu:function(d,b){m.setStyle(b,"display","block");v(".searchMenu",b).style("display","block");this._isSearchResultsShown=!0;var c=v(".searchInputGroup",d.domNode)[0];c&&(c={width:m.getMarginBox(c).w+"px"},v(".searchMenu",b).style(c))},_resetSelectorPosition:function(d,b){var c=m.getMarginBox(this.domNode.offsetParent);v(b,this.domNode).forEach(h.hitch(this,function(k){var f=m.position(k),h=m.position(d.domNode),h=".noResultsMenu"===
b?0:h.h;f.y+f.h>c.h&&m.setStyle(k,"top",-(f.h+h)-4+"px")}))},_hideResultMenu:function(){v(".searchMenu",this.domNode).style("display","none");this._isSearchResultsShown=!1}})})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(t,h,f,m,v,y,n,q,x,z,r){t=t(z,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],
"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(c){this._geocodeHandler=h.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=h.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=h.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(c){this.outSpatialReference=c},_geocodeHandler:function(c,
d,b,k,f){try{var h=c.candidates,p;d=[];var q,m=h.length,n=c.spatialReference,v;for(q=0;q<m;q++){p=h[q];if(v=p.location)v.spatialReference=n;d[q]=new r(p)}this._successHandler([d],"onAddressToLocationsComplete",b,f)}catch(w){this._errorHandler(w,k,f)}},_geocodeAddressesHandler:function(c,d,b,k,f){try{var h=c.locations;d=[];var p,q=h.length,m=c.spatialReference,n;for(p=0;p<q;p++){if(n=h[p].location)n.spatialReference=m;d[p]=new r(h[p])}this._successHandler([d],"onAddressesToLocationsComplete",b,f)}catch(D){this._errorHandler(D,
k,f)}},addressToLocations:function(c,d,b,k,f){var r,p,n,t,y,z,w;c.address&&(k=b,b=d,d=c.outFields,f=c.searchExtent,w=c.countryCode,r=c.magicKey,p=c.distance,z=c.categories,c.location&&this.normalization&&(n=c.location.normalize()),t=c.maxLocations,y=c.forStorage,c=c.address);f&&(f=f.shiftCentralMeridian());var B=this.outSpatialReference;c=this._encode(h.mixin({},this._url.query,c,{f:"json",outSR:B&&v.toJson(B.toJson()),outFields:d&&d.join(",")||null,searchExtent:f&&v.toJson(f.toJson()),category:z&&
z.join(",")||null,countryCode:w||null,magicKey:r||null,distance:p||null,location:n||null,maxLocations:t||null,forStorage:y||null}));var K=this._geocodeHandler,L=this._errorHandler,E=new m(x._dfdCanceller);E._pendingDfd=q({url:this._url.path+"/findAddressCandidates",content:c,callbackParamName:"callback",load:function(d,c){K(d,c,b,k,E)},error:function(b){L(b,k,E)}});return E},suggestLocations:function(c){var d;d=new m(x._dfdCanceller);c.hasOwnProperty("location")&&this.normalization&&(c.location=c.location.normalize());
c.searchExtent&&(c.searchExtent=c.searchExtent.shiftCentralMeridian());c=this._encode(h.mixin({},this._url.query,{f:"json",text:c.text,maxSuggestions:c.maxSuggestions,searchExtent:c.searchExtent&&v.toJson(c.searchExtent.toJson()),category:c.categories&&c.categories.join(",")||null,countryCode:c.countryCode||null,location:c.location||null,distance:c.distance||null},{f:"json"}));c=q({url:this._url.path+"/suggest",content:c,callbackParamName:"callback"});d._pendingDfd=c;c.then(h.hitch(this,function(b){b=
b.suggestions||[];this.onSuggestLocationsComplete(b);d.resolve(b)}),h.hitch(this,function(b){this._errorHandler(b);d.reject(b)}));return d},addressesToLocations:function(c,d,b){var k=this.outSpatialReference,r=[],n=c.categories,t=c.countryCode;f.forEach(c.addresses,function(b,d){r.push({attributes:b})});c=this._encode(h.mixin({},this._url.query,{category:n&&n.join(",")||null,sourceCountry:t||null},{addresses:v.toJson({records:r})},{f:"json",outSR:k&&v.toJson(k.toJson())}));var y=this._geocodeAddressesHandler,
z=this._errorHandler,C=new m(x._dfdCanceller);C._pendingDfd=q({url:this._url.path+"/geocodeAddresses",content:c,callbackParamName:"callback",load:function(c,k){y(c,k,d,b,C)},error:function(d){z(d,b,C)}});return C},_reverseGeocodeHandler:function(c,d,b,k,f){try{var h=new r({address:c.address,location:c.location,score:100});this._successHandler([h],"onLocationToAddressComplete",b,f)}catch(J){this._errorHandler(J,k,f)}},locationToAddress:function(c,d,b,k){c&&this.normalization&&(c=c.normalize());var f=
this.outSpatialReference;c=this._encode(h.mixin({},this._url.query,{outSR:f&&v.toJson(f.toJson()),location:c&&v.toJson(c.toJson()),distance:d,f:"json"}));var r=this._reverseGeocodeHandler,n=this._errorHandler,t=new m(x._dfdCanceller);t._pendingDfd=q({url:this._url.path+"/reverseGeocode",content:c,callbackParamName:"callback",load:function(d,c){r(d,c,b,k,t)},error:function(b){n(b,k,t)}});return t},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},
onLocationToAddressComplete:function(){}});y("extend-esri")&&h.setObject("tasks.Locator",t,n);return t})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(t,h,f,m,v){t=t(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(f){h.mixin(this,f);this.location=new v(this.location)}});f("extend-esri")&&h.setObject("tasks.AddressCandidate",t,m);return t})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(t,h,f,m,v,y,n,q,x,z,r,c,d,b,k,p,A,J,T,U,C,D,w,B,K,L,E,F,G,V,W,M,X,Y,H,N,Q,O,R,Z,S,aa,ba){function I(a,g){a&&g&&(a._layer=g,a._sourceLayer=g)}h=h([T,U,C,v],{declaredClass:"esri.dijit.Search",templateString:J,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(a,g){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",
searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",
showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",
searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new Z("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type",
"Match_addr","StAddr","City"],name:A.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:A.widgets.Search.main.placeholder,highlightSymbol:(new V(t.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:150,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,
enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new Y).setColor(new aa([181,56,46,.9])).setFont(new H("14px",H.STYLE_NORMAL,H.VARIANT_NORMAL,H.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new K(A.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:1,enableSearchingAll:!0};var l=f.mixin({},this.options,a);this.set(l);this._updateActiveSource();this._i18n=A;this._defaultSR=new E(4326);this.domNode=g},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(f.hitch(this,this._init))},postCreate:function(){var a=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(q(this.submitNode,D,f.hitch(this,this._searchButton)));this.own(q(this.sourcesBtnNode,D,f.hitch(this,this._toggleSourcesMenu)));this.own(q(this.inputNode,D,f.hitch(this,this._inputClick)));this.own(q(this.clearNode,D,f.hitch(this,this._clearButton)));this.own(q(this.formNode,"submit",f.hitch(this,function(a){a.preventDefault();this._cancelSuggest();this.search()})));this.own(q(this.inputNode,"keyup",f.hitch(this,function(a){this._inputKey(a)})));
this.own(q(this.sourcesBtnNode,"keyup",f.hitch(this,function(a){this._sourceBtnKey(a)})));this.own(q(this.suggestionsNode,"li:click, li:keyup",function(g){a._suggestionsEvent(g,this)}));this.own(q(this.sourcesNode,"li:click, li:keyup",function(g){a._sourcesEvent(g,this)}));this.own(q(this.inputNode,"input, paste",f.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(q(this.map.infoWindow.domNode,"#"+this._moreResultsId+
"_show:click",f.hitch(this,function(a){this._showMoreResultsClick(a)}))),this.own(q(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",f.hitch(this,function(a){this._moreResultsClick(a)}))),this.own(q(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",f.hitch(this,function(a){this._switchCoordinatesClick(a)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);
this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();p.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();d.get(this.inputNode,"value")&&d.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);b.remove(this.containerNode,this.css.hasValue);d.set(this.clearNode,
"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){k.set(this.domNode,"display","block")},hide:function(){k.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(b.add(this.containerNode,this.css.searchExpanded),b.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(b.remove(this.containerNode,this.css.searchExpanded),b.add(this.containerNode,
this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(a){this.enableButtonMode&&("undefined"===typeof a&&(a=!this.expanded),a?this.expand():this.collapse())},search:function(a){var g=new y;this._mapLoaded().then(f.hitch(this,function(){this._searchDeferred(a).then(f.hitch(this,function(a){var e=a.results;this.set("searchResults",e);0===a.numResults&&(this._noResults(a.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",a);this._selectFirstResult(e,
a.activeSourceIndex);g.resolve(e)}),f.hitch(this,function(a){g.reject(a)}))}));return g.promise},suggest:function(a){var g=new y;this._mapLoaded().then(f.hitch(this,function(){this._suggestDeferred(a).then(f.hitch(this,function(a){if(a){var e=a.results;this.set("suggestResults",e);this._insertSuggestions(e,a.value);this.emit("suggest-results",a);g.resolve(e)}}),f.hitch(this,function(a){g.reject(a)}))}));return g.promise},select:function(a){var g=this._getDefaultSymbol(a),l=this.labelSymbol,e,b=this.sources,
d=this.activeSourceIndex,c=this.enableHighlight,k=this.enableLabel,h=this.autoNavigate,r=this.showInfoWindowOnSelect,P=this.enableInfoWindow,q=this.infoTemplate,p=new F(a.feature.toJson()),n=a.feature._sourceLayer;I(p,n);if(d===this._allIndex){var m=this._getSourceIndexOfResult(a);null!==m&&(e=b[m],d=m)}else e=b[d];e&&(e.hasOwnProperty("highlightSymbol")&&(g=e.highlightSymbol),e.hasOwnProperty("labelSymbol")&&(l=e.labelSymbol),e.hasOwnProperty("enableHighlight")&&(c=e.enableHighlight),e.hasOwnProperty("enableLabel")&&
(k=e.enableLabel),e.hasOwnProperty("autoNavigate")&&(h=e.autoNavigate),e.hasOwnProperty("showInfoWindowOnSelect")&&(r=e.showInfoWindowOnSelect),e.hasOwnProperty("enableInfoWindow")&&(P=e.enableInfoWindow),e.hasOwnProperty("infoTemplate")?q=e.infoTemplate:e.featureLayer&&e.featureLayer.infoTemplate&&(q=e.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(p){var b=this.highlightGraphic,v=this.graphicsLayer,m=this.labelGraphic,t=f.mixin({},p.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(a),
searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(a)}),w=null;P&&(w=q);m?(m.setGeometry(p.geometry),m.setAttributes(t),m.setSymbol(l),l&&"textsymbol"===l.type&&m.symbol.setText(a.name)):(m=new F(p.geometry,l,t),I(m,n),l&&"textsymbol"===l.type&&m.symbol.setText(a.name),k&&(v?v.add(m):this.map&&this.map.graphics&&this.map.graphics.add(m)));b?(b.setGeometry(p.geometry),
b.setAttributes(t),b.setInfoTemplate(w),b.setSymbol(g)):(b=new F(p.geometry,g,t,w),I(b,n),c&&(v?v.add(b):this.map&&this.map.graphics&&this.map.graphics.add(b)));b&&b.symbol&&"textsymbol"===b.symbol.type&&b.symbol.setText(a.name);this.map&&this.map.infoWindow&&P&&r&&(this.map.infoWindow.setFeatures([b]),g=this._getPointFromGeometry(b.geometry),this.map.infoWindow.show(g));this.map&&h&&a&&a.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(a.extent);this.set("highlightGraphic",
b);this.set("labelGraphic",m)}this.set("selectedResult",a);this.emit("select-result",{result:a,source:e,sourceIndex:d})},focus:function(){w.focus(this.inputNode)},blur:function(){this.inputNode.blur();w.curNode&&w.curNode.blur()},clearGraphics:function(){var a=this.highlightGraphic,g=this.graphicsLayer,b=this.labelGraphic;a&&(g?g.remove(a):this.map&&this.map.graphics&&this.map.graphics.remove(a));b&&(g?g.remove(b):this.map&&this.map.graphics&&this.map.graphics.remove(b));this.set("labelGraphic",null);
this.set("highlightGraphic",null)},_mapLoaded:function(){var a=new y;if(this.map)if(this.map.loaded)a.resolve();else q.once(this.map,"load",f.hitch(this,function(){a.resolve()}));else a.resolve();return a.promise},_init:function(){this._getMapLayers().then(f.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();w.focus(this.inputNode)},_error:function(a){return Error(this.declaredClass+" "+a)},_searchDeferred:function(a){var g=new y,b=this.value,e=
this.activeSourceIndex;a&&a.hasOwnProperty("index")&&(e=a.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var u={magicKey:this.magicKey,text:b};a?"string"===typeof a?(u.text=a,a=this._searchQueries(u)):a="object"===typeof a&&a.hasOwnProperty("magicKey")?this._searchQueries(a):"object"===typeof a&&a.hasOwnProperty("geometry")?this._searchQueries({geometry:a}):"object"===typeof a&&a.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(a):"object"===typeof a&&
"point"===a.type?this._searchQueries({point:a}):a instanceof Array&&2===a.length?this._searchQueries({latlon:a}):this._searchQueries(u):a=this._searchQueries(u);a.always(f.hitch(this,function(a){a=this._formatResults(a,e,b);g.resolve(a)}));return g.promise},_suggestDeferred:function(a){var g=new y;this._deferreds.push(g);a||(a=this.value);var b=this.activeSourceIndex;this._suggestQueries({text:a}).always(f.hitch(this,function(e){var l;if(e)for(var d=0;d<e.length;d++)e[d]&&(l=!0);l?(e=this._formatResults(e,
b,a),g.resolve(e)):g.resolve()}));return g.promise},_getDefaultSymbol:function(a){var g,b,e,u;this.map&&(u=this.map.getBasemap());u||(u="topo");a&&a.feature&&a.feature.geometry&&(e=a.feature.geometry.type);"polyline"===e?e="line":"circle"===e||"extent"===e?e="polygon":"multipoint"===e&&(e="point");if(e){if(a=ba.getSchemes({theme:"default",basemap:u,geometryType:e}))b=a.primaryScheme;if(b){b.color&&b.hasOwnProperty("opacity")&&(b.color.a=b.opacity);g=b;a=b.color;b=b.size;var d;switch(e){case "point":d=
new W;d.setColor(a);d.setSize(null!==b?b:g.size);e=new M;e.setColor(g.outline.color);e.setWidth(g.outline.width);d.setOutline(e);break;case "line":d=new M;d.setColor(a);d.setWidth(null!==b?b:g.width);break;case "polygon":d=new X,d.setColor(a),e=new M,e.setColor(g.outline.color),e.setWidth(g.outline.width),d.setOutline(e)}g=d}}return g},_selectFirstResult:function(a,g){if(this.autoSelect&&a){var b;g===this._allIndex?b=this._getFirstResult(a):a[g]&&a[g][0]&&(b=a[g][0]);b&&this.select(b)}},_getSourceIndexOfResult:function(a){var b=
this.searchResults;if(b)for(var l in b)if(b[l]&&b[l].length)for(var e=0;e<b[l].length;e++)if(b[l][e]===a)return parseInt(l,10);return null},_getFirstResult:function(a){if(a)for(var b in a)if(a[b]&&a[b][0])return a[b][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();this.map&&"function"===typeof this.map.enableKeyboardNavigation&&
this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var a=new y;if(this.addLayersFromMap&&this.map){var b=[],l=this.map.graphicsLayerIds;if(l&&l.length){for(var e=0;e<l.length;e++){var u=this.map.getLayer(l[e]);u&&b.push(this._featureLayerLoaded(u))}G(b).always(f.hitch(this,function(b){for(var g,e=this.sources,l=0;l<b.length;l++)b[l]&&b[l].loaded&&"Feature Layer"===b[l].type&&(e.push({featureLayer:b[l],
enableSuggestions:!0}),g=!0);g&&this.set("sources",e);a.resolve()}))}else a.resolve()}else a.resolve();return a.promise},_switchCoordinatesClick:function(a){a.preventDefault();if(a=d.get(a.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",a),this.search()},_moreResultsClick:function(a){a.preventDefault();var b=a.target;a=parseInt(d.get(b,"data-source-index"),10);var b=parseInt(d.get(b,"data-index"),10),l=this.searchResults;l&&l[a]&&(a=l[a][b])&&this.select(a)},_showMoreResultsClick:function(a){a.preventDefault();
if(a=c.byId(this._moreResultsId)){b.toggle(a,this.css.searchShowMoreResults);var g=c.byId(this._moreResultsId+"_show");g&&(b.contains(a,this.css.searchShowMoreResults)?d.set(g,"textContent",A.widgets.Search.main.hideMoreResults):d.set(g,"textContent",A.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(a){var b=new y;if(a.loaded)b.resolve(a);else if(a.loadError)b.reject(this._error("Layer failed to load."));else{var l,e;l=q.once(a,"load",f.hitch(this,function(){e.remove();b.resolve(a)}));
e=q.once(a,"error",f.hitch(this,function(){l.remove();b.reject(this._error("Layer could not be loaded."))}))}return b.promise},_getObjectSize:function(a){var b=0,l;for(l in a)a.hasOwnProperty(l)&&b++;return b},_sourcesEvent:function(a,b){var g=d.get(b,"data-index"),e=x("li",this.sourcesNode),u=m.indexOf(e,b);g!==this._allIndex&&(g=parseInt(g,10));"click"===a.type||a.keyCode===n.ENTER?(this.set("activeSourceIndex",g),w.focus(this.inputNode),this._hideSourcesMenu()):a.keyCode===n.UP_ARROW?(a.stopPropagation(),
a.preventDefault(),g=u-1,0>g?w.focus(this.sourcesBtnNode):w.focus(e[g])):a.keyCode===n.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),g=u+1,g>=e.length?w.focus(this.sourcesBtnNode):w.focus(e[g])):a.keyCode===n.ESCAPE&&(this._hideSourcesMenu(),w.focus(this.inputNode))},_suggestionsEvent:function(a,b){var g=d.get(b,"data-source-index"),e=parseInt(d.get(b,"data-index"),10),u=x("li",this.suggestionsNode),c=this.sources,k=m.indexOf(u,b);g!==this._allIndex&&(g=parseInt(g,10));var f;this._clearQueryTimeout();
"click"===a.type||a.keyCode===n.ENTER?((u=this.suggestResults)&&u[g]&&u[g][e]&&(f=u[g][e]),f&&(f.index=g,c[g].featureLayer?(g=c[g].featureLayer.objectIdField,f[this._objectIdIdentifier]=f.feature.attributes[g],this.set("value",this._getSuggestionName(f)),this.set("selectedFeatureId",f.feature.attributes[g])):f.magicKey&&f.text&&(this.set("value",f.text),this.set("magicKey",f.magicKey)),this.search(f),w.focus(this.inputNode))):a.keyCode===n.BACKSPACE||a.keyCode===n.DELETE?w.focus(this.inputNode):a.keyCode===
n.UP_ARROW?(a.stopPropagation(),a.preventDefault(),f=k-1,0>f?w.focus(this.inputNode):w.focus(u[f])):a.keyCode===n.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),f=k+1,f>=u.length?w.focus(this.inputNode):w.focus(u[f])):a.keyCode===n.ESCAPE&&(this._hideMenus(),w.focus(this.inputNode))},_getResultName:function(a){var b;a.hasOwnProperty("name")&&null!==a.name&&(b=a.name.toString());b||(b=A.widgets.Search.main.untitledResult);return b},_getSuggestionName:function(a){var b;a.hasOwnProperty("name")&&
null!==a.name&&(b=a.name.toString());a=a.text||b;a||(a=A.widgets.Search.main.untitledResult);return a},_searchResultHTML:function(a){var b="";if(a.feature&&a.feature.attributes&&a.feature.attributes.Addr_type&&"LatLong"===a.feature.attributes.Addr_type){var l=a.name.split(" "),e,u;2===l.length&&(e=l[0],u=l[1]);u&&e?(a=parseFloat(e),u=parseFloat(u),l=u+", "+a,b+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',b+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+A.widgets.Search.main.lonlat+
"\x3c/div\x3e",b=b+(a+", "+u)+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),a===u||90<a||-90>a||180<u||-180>u||(b+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+A.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",b=b+('\x3ca data-switch-coordinates\x3d"'+l+'" tabindex\x3d"0" href\x3d"#"\x3e'+l+"\x3c/a\x3e")+"\x3c/div\x3e")):b=a.name}else b=a.name;return b},_moreResultsHTML:function(a){var b="",l="",e=this.searchResults,u=this.sources,d=0;if(e){var l=l+('\x3cdiv class\x3d"'+
this.css.searchMoreResultsItem+'"\x3e'),l=l+('\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+A.widgets.Search.main.showMoreResults+"\x3c/a\x3e"),l=l+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsList+'"\x3e'),l=l+('\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e'),c;for(c in e)if(e[c]){var f=e[c].length;if(f){var k=1===f&&e[c][0]===a;if(1<this._getObjectSize(e)&&!k)var h=this._getSourceName(c),l=l+('\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+h+
"\x3c/div\x3e");if(f&&!k){l+="\x3cul\x3e";h=u[c].maxResults||this.maxResults;for(k=0;k<f&&k<h;++k)if(e[c][k]!==a){var r=this._getResultName(e[c][k]),l=l+('\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+k+'" data-source-index\x3d"'+c+'" href\x3d"#"\x3e'+r+"\x3c/a\x3e\x3c/li\x3e");d++}l+="\x3c/ul\x3e"}}}l+="\x3c/div\x3e\x3c/div\x3e"}d&&(b+=l);return b},_validField:function(a,b){return a.getField(b)},_validFields:function(a,b){if(a&&b&&b.length){for(var g=0;g<b.length;g++)if(!this._validField(a,b[g]))return!1;
return!0}return!1},_getCodedName:function(a,b){if(a&&a.length)for(var g=0,e=a.length;g<e;g++){var u=a[g];if(u.code===b)return u.name}},_getCodedValue:function(a,b,l){if(a&&a.length)for(var e=0,g=a.length;e<g;e++){var d=a[e],c=d.name,f=b;l||(c=c.toLowerCase(),f=f.toLowerCase());if(c===f)return d.code}return!1},_whereClause:function(a,b,l,e){var g=null;if(a){var d="";this.reHostedFS.test(b.url)&&this._containsNonLatinCharacter(a)&&(d="N");if(l&&l.length)for(var c=0,f=l.length;c<f;c++){var k="",h=a.replace(/\'/g,
"''"),k=l[c],r=b.getField(k),p=b.getDomain(k);p&&"codedValue"===p.type&&(h=this._getCodedValue(p.codedValues,h,e));!1!==h&&(r=r.type,"esriFieldTypeString"===r||"esriFieldTypeDate"===r?k=e?k+" \x3d "+d+"'"+h+"'":"UPPER("+k+") LIKE "+d+"'%"+h.toUpperCase()+"%'":"esriFieldTypeOID"===r||"esriFieldTypeSmallInteger"===r||"esriFieldTypeInteger"===r||"esriFieldTypeSingle"===r||"esriFieldTypeDouble"===r?(h=parseFloat(h),k=isNaN(h)?!1:k+" \x3d "+h):k=k+" \x3d "+h,k&&(g=g?g+" or ":"",g+=k))}}return g},_suggest:function(a){a||
(a={index:this.activeSourceIndex,text:this.value});var b=new y,l=a.index,e=this.sources[l],d=this.enableSuggestions;e.hasOwnProperty("enableSuggestions")&&(d=e.enableSuggestions);var c=0,k;a.hasOwnProperty("text")&&a.text&&(k=f.trim(a.text),c=a.text.length);a=e.minCharacters||this.minCharacters;if(d&&k&&c>=a&&this._supportsPagination(e)){var h="";e.prefix&&(h+=e.prefix);h+=k;e.suffix&&(h+=e.suffix);var r=this._defaultSR;this.map&&(r=this.map.spatialReference);d={};e.locator?(e.categories&&(d.categories=
e.categories),e.locator.outSpatialReference=r,this.map&&e.localSearchOptions&&e.localSearchOptions.hasOwnProperty("distance")&&e.localSearchOptions.hasOwnProperty("minScale")&&(c=this._getScale(),!e.localSearchOptions.minScale||c&&c<=parseFloat(e.localSearchOptions.minScale))&&(d.location=this.map.extent.getCenter(),d.distance=e.localSearchOptions.distance),d.text=h,e.useMapExtent&&this.map&&this.map.extent&&(d.searchExtent=this.map.extent),e.searchExtent&&(d.searchExtent=e.searchExtent),d.maxSuggestions=
e.maxSuggestions||this.maxSuggestions,e.sourceCountry&&(d.countryCode=e.sourceCountry),e.countryCode&&(d.countryCode=e.countryCode),e.locator.suggestLocations(d).then(f.hitch(this,function(a){b.resolve(a)}),f.hitch(this,function(a){a||(a=this._error("Locator suggestLocations could not be performed."));b.reject(a)}))):e.featureLayer?this._featureLayerLoaded(e.featureLayer).then(f.hitch(this,function(){var a=this._getDisplayField(e),g=e.searchFields||[a],d=[];e.suggestionTemplate?e.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,
function(a,b){d.push(b)}):d=[a];-1===m.indexOf(d,e.featureLayer.objectIdField)&&d.push(e.featureLayer.objectIdField);var a=this._validField(e.featureLayer,a),c=this._validFields(e.featureLayer,d),u=this._validFields(e.featureLayer,g);if(a&&c&&u){a=new S;e.hasOwnProperty("suggestQueryParams")&&f.mixin(a,e.suggestQueryParams);a.outSpatialReference=r;a.returnGeometry=!1;a.num=e.maxSuggestions||this.maxSuggestions;a.outFields=d;e.useMapExtent&&this.map&&this.map.extent&&(a.geometry=this.map.extent);e.searchExtent&&
(a.geometry=e.searchExtent);var k;if(g=this._whereClause(h,e.featureLayer,g,!1))a.where=g,k=!0;k?e.featureLayer.queryFeatures(a,f.hitch(this,function(a){var e;(a=a.features)&&(e=this._hydrateResults(a,l,!0));b.resolve(e)}),f.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures errored with suggestions"));b.reject(a)})):b.resolve()}else b.reject(this._error("Invalid FeatureLayer field"))})):b.reject(this._error("Invalid source"))}else b.resolve();return b.promise},_supportsPagination:function(a){var b;
a.locator?b=!0:a.featureLayer&&a.featureLayer.advancedQueryCapabilities&&a.featureLayer.advancedQueryCapabilities.supportsPagination&&(b=!0);return b},_suggestQueries:function(a){var b=this.sources,d=this.activeSourceIndex,e=[],c;if(d===this._allIndex)for(d=0;d<b.length;d++)c=a,c.index=d,c=this._suggest(c),e.push(c);else a.index=d,c=this._suggest(a),e.push(c);return G(e)},_getPointFromGeometry:function(a){var b;switch(a.type){case "extent":b=a.getCenter();break;case "multipoint":b=a.getPoint(0);break;
case "point":b=a;break;case "polygon":b=a.getCentroid();break;case "polyline":b=a.getPoint(0,0)}return b},_searchQueries:function(a){a.hasOwnProperty("index")||(a.index=this.activeSourceIndex);var b=[],d;if(a.index===this._allIndex)for(var e=this.sources,c=0;c<e.length;c++)d=a,d.index=c,d=this._search(d),b.push(d);else a=this._search(a),b.push(a);return G(b)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),w.focus(this.inputNode)):(this._cancelSuggest(),this.search())},
_search:function(a){a||(a={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(a.text=null,a[this._objectIdIdentifier]=this.selectedFeatureId);var b,d=new y,e=a.index,c=this.sources[e],k;a.hasOwnProperty("text")&&a.text&&(k=f.trim(a.text));if(c){var h="";c.prefix&&!a.magicKey&&(h+=c.prefix);h+=k;c.suffix&&!a.magicKey&&(h+=c.suffix);var r=this._defaultSR;this.map&&(r=this.map.spatialReference);if(c.locator)if(a.hasOwnProperty("text")&&
k){var p={};c.categories&&(p.categories=c.categories);r&&(c.locator.outSpatialReference=r);if(this.map&&c.localSearchOptions&&c.localSearchOptions.hasOwnProperty("distance")&&c.localSearchOptions.hasOwnProperty("minScale")){var m=this._getScale();if(!c.localSearchOptions.minScale||m&&m<=parseFloat(c.localSearchOptions.minScale))p.location=this.map.extent.getCenter(),p.distance=c.localSearchOptions.distance}p.address={};p.maxLocations=c.maxResults||this.maxResults;c.useMapExtent&&this.map&&this.map.extent&&
(p.searchExtent=this.map.extent);c.searchExtent&&(p.searchExtent=c.searchExtent);c.sourceCountry&&(p.countryCode=c.sourceCountry);c.countryCode&&(p.countryCode=c.countryCode);a.magicKey&&(p.magicKey=a.magicKey);c.singleLineFieldName?p.address[c.singleLineFieldName]=h:p.address["Single Line Input"]=h;c.outFields&&(p.outFields=c.outFields);c.locator.addressToLocations(p).then(f.hitch(this,function(a){a=this._hydrateResults(a,e,!1);d.resolve(a)}),f.hitch(this,function(a){a||(a=this._error("Locator addressToLocations could not be performed"));
d.reject(a)}))}else a.geometry?(b=this._getPointFromGeometry(a.geometry.geometry))?this._reverseGeocodePoint(e,b).then(function(a){d.resolve(a)},function(a){d.reject(a)}):d.reject(this._error("Invalid point to reverse geocode")):a.point?this._reverseGeocodePoint(e,a.point).then(function(a){d.resolve(a)},function(a){d.reject(a)}):a.latlon?(p=new N(a.latlon,this._defaultSR),this._reverseGeocodePoint(e,p).then(function(a){d.resolve(a)},function(a){d.reject(a)})):a.hasOwnProperty("text")&&!k?d.resolve([]):
d.reject(this._error("Invalid query type for Locator"));else c.featureLayer?this._featureLayerLoaded(c.featureLayer).then(f.hitch(this,function(){var g=this._getDisplayField(c),l=c.searchFields||[g],g=this._validField(c.featureLayer,g),p=this._validFields(c.featureLayer,l);if(g&&p){g=new S;c.hasOwnProperty("searchQueryParams")&&f.mixin(g,c.searchQueryParams);r&&(g.outSpatialReference=r,p=this.map&&this.map.getMaxResolution()||1/R.getUnitValueForSR(r))&&(g.maxAllowableOffset=p);g.returnGeometry=!0;
c.outFields&&(g.outFields=c.outFields);var u;a.hasOwnProperty(this._objectIdIdentifier)||(this._supportsPagination(c)&&(g.num=c.maxResults||this.maxResults),c.useMapExtent&&this.map&&this.map.extent&&(g.geometry=this.map.extent),c.searchExtent&&(g.geometry=c.searchExtent),u=c.exactMatch);a.hasOwnProperty("text")&&k?(l=this._whereClause(h,c.featureLayer,l,u))?(g.where=l,l=!0):l=!1:a.hasOwnProperty(this._objectIdIdentifier)?(g.objectIds=[a[this._objectIdIdentifier]],l=!0):a.geometry?(g.geometry=a.geometry,
l=!0):a.point?(g.geometry=a.point,l=!0):a.latlon?(b=new N(a.latlon,this._defaultSR),g.geometry=b,l=!0):(a.hasOwnProperty("text")&&!k?d.resolve([]):d.reject(this._error("Invalid query type for FeatureLayer")),l=!1);l?c.featureLayer.queryFeatures(g,f.hitch(this,function(a){a=a.features;var b;a&&(b=this._hydrateResults(a,e,!1));d.resolve(b)}),f.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures could not be performed"));d.reject(a)})):d.resolve()}else d.reject(this._error("Invalid FeatureLayer field"))})):
d.reject(this._error("Invalid source"))}else d.reject(this._error("Source is undefined"));return d.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(a,b,c){c={activeSourceIndex:b,value:c,numResults:0,numErrors:0,errors:null,results:null};var e={},d={};if(a)if(b===this._allIndex)for(b=0;b<a.length;b++)a[b]&&(a[b]instanceof Error?(e[b]=a[b],c.numErrors++):(d[b]=a[b],c.numResults+=a[b].length));else a[0]&&(a[0]instanceof Error?(e[b]=a[0],
c.numErrors++):(d[b]=a[0],c.numResults+=a[0].length));c.numErrors&&(c.errors=e);c.numResults&&(c.results=d);return c},_reverseGeocodePoint:function(a,b){var c=new y,e=this.sources[a];if(b&&e){var d=e.locationToAddressDistance||this.locationToAddressDistance;e.locator.outSpatialReference=this._defaultSR;this.map&&(e.locator.outSpatialReference=this.map.spatialReference);e.locator.locationToAddress(b,d,f.hitch(this,function(b){b=this._hydrateResults([b],a,!1);c.resolve(b)}),f.hitch(this,function(a){a||
(a=this._error("Locator locationToAddress could not be performed"));c.reject(a)}))}else c.reject(this._error("No point or source defined for reverse geocoding"));return c.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var a=0;a<this._deferreds.length;a++)this._deferreds[a].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(a){if(a){var b=x("li",this.sourcesNode);a.keyCode===n.UP_ARROW?(a.stopPropagation(),a.preventDefault(),
this._showSourcesMenu(),(a=b.length)&&w.focus(b[a-1])):a.keyCode===n.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),b[0]&&w.focus(b[0]))}},_inputKey:function(a){if(a){var b=x("li",this.suggestionsNode),c=this.suggestResults;if(a.keyCode===n.TAB||a.keyCode===n.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(a.keyCode===n.UP_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),c&&this._showSuggestionsMenu(),(a=b.length)&&w.focus(b[a-1]);else if(a.keyCode===
n.DOWN_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),c&&this._showSuggestionsMenu(),b[0]&&w.focus(b[0]);else{if(a.ctrlKey||a.metaKey||a.keyCode===n.copyKey||a.keyCode===n.LEFT_ARROW||a.keyCode===n.RIGHT_ARROW||a.keyCode===n.ENTER)return a;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(f.hitch(this,function(){this.suggest()}),this.suggestionDelay)},
_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(a){return this._sourceNames[a]},_loadSources:function(a){a=m.filter(a,function(a){return!!a.featureLayer});a=m.map(a,function(a){return this._featureLayerLoaded(a.featureLayer)},this);return G(a)},_createSourceNameMap:function(a){return this._loadSources(a).then(f.hitch(this,
function(){var b=m.map(a,function(a){return a.name||a.featureLayer&&a.featureLayer.name||A.widgets.Search.main.untitledSource});this._preventDuplicateSourceNames(a,b);return b}))},_getDuplicateSourceNameIndexes:function(a){var b={},c=[];m.forEach(a,function(e,d){b.hasOwnProperty(e)?(-1===c.indexOf(b[e])&&c.push(b[e]),c.push(d)):a.lastIndexOf(e)!==d&&(b[e]=d)});return c},_preventDuplicateSourceNames:function(a,b){if(b&&1<b.length){var c=this._getDuplicateSourceNameIndexes(b);m.forEach(c,function(e){b[e]+=
this._getFieldsString(a[e])},this)}},_getFieldsString:function(a){var b="",c=a.featureLayer;if(c){a=a.searchFields||[this._getDisplayField(a)];for(var e=0;e<a.length;e++)var b=0===e?b+": ":b+", ",d=a[e],k=c.getFieldLabel(d),b=b+(k||d)}return b},_splitResult:function(a,b){var c=r.escapeString(b);return a.replace(new RegExp("(^|)("+c+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(a,b){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();
var c,e=this.sources;if(a){c=p.create("div");for(var d in a)if(a[d]&&a[d].length){var g=this._getSourceName(d);1<e.length&&this.activeSourceIndex===this._allIndex&&p.create("div",{className:this.css.searchMenuHeader,textContent:g},c);for(var g=p.create("ul",{role:"menu"},c),k=e[d].maxSuggestions||this.maxSuggestions,f=0;f<a[d].length&&f<k;++f)for(var h=p.create("li",{"data-index":f,"data-source-index":d,role:"menuitem",tabindex:0},g),r=this._getSuggestionName(a[d][f]),r=this._splitResult(r,b),m=r.length,
q=0;q<m;q++){var n=r[q];n.toLowerCase()===b.toLowerCase()?p.create("strong",{textContent:n},h):(n=document.createTextNode(n),p.place(n,h))}}}c?(p.place(c,this.suggestionsNode,"only"),this._showSuggestionsMenu()):(p.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(a){if(this.enableSourcesMenu&&a&&1<a.length){var c,d,e=this.activeSourceIndex,k=p.create("ul",{role:"menu"});this.enableSearchingAll&&(c="",e===this._allIndex&&(c="active"),p.create("li",{"data-index":this._allIndex,
role:"menuitem",className:c,tabIndex:0,textContent:A.widgets.Search.main.all},k));for(d=0;d<a.length;d++){c="";d===e&&(c=this.css.activeSource);var f=this._getSourceName(d);p.create("li",{"data-index":d,role:"menuitem",className:c,tabIndex:0,textContent:f},k)}b.add(this.containerNode,this.css.hasMultipleSources);p.place(k,this.sourcesNode,"only")}else b.remove(this.containerNode,this.css.hasMultipleSources),p.empty(this.sourcesNode)},_showLoading:function(){b.add(this.containerNode,this.css.searchLoading)},
_hideLoading:function(){b.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(b.add(this.containerNode,this.css.hasValue),d.set(this.clearNode,"title",A.widgets.Search.main.clearButtonTitle)):this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(a){var b;a&&(b=f.trim(a));var c=p.create("div",{className:this.css.searchNoResultsBody});a&&b?(p.create("div",{className:this.css.searchNoResultsHeader,
textContent:A.widgets.Search.main.noResults},c),p.create("div",{className:this.css.searchNoResultsText,textContent:B.substitute({value:'"'+a+'"'},A.widgets.Search.main.noResultsFound)},c)):(a=p.create("div",{},c),p.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},a),p.create("span",{className:this.css.searchNoValueText,textContent:A.widgets.Search.main.emptyValue},a));p.place(c,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();
this._hideNoResultsMenu()},_hideNoResultsMenu:function(){b.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();b.add(this.containerNode,this.css.showNoResults)},_hideSourcesMenu:function(){b.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){b.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();b.add(this.containerNode,
this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();b.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();b.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(a){if(a&&(a=a.fields)&&a.length)for(var b=0;b<a.length;b++){var c=a[b];if("esriFieldTypeString"===c.type)return c.name}return""},_getDisplayField:function(a){return a.displayField||
a.featureLayer.displayField||this._getFirstStringField(a.featureLayer)},_validExtent:function(a){return a&&a.xmin&&"NaN"!==a.xmin&&a.ymin&&"NaN"!==a.ymin&&a.xmax&&"NaN"!==a.xmax&&a.ymax&&"NaN"!==a.ymax?!0:!1},_hydrateResult:function(a,b,c){var e={},d=this._defaultSR,k;b=this.sources[b];this.map&&(d=this.map.spatialReference);if(a.hasOwnProperty("text")&&a.hasOwnProperty("magicKey"))return a;if(a.hasOwnProperty("geometry"))k=new F(a.toJson()),e.feature=k,(k=e.feature.geometry)&&k.setSpatialReference(d);
else if(a.hasOwnProperty("location")){var g=new N(a.location.x,a.location.y,d);k={};a.hasOwnProperty("attributes")&&(k=a.attributes);a.hasOwnProperty("score")&&(k.score=a.score);e.feature=new F(g,null,k,null)}else e.feature=null;if(a.hasOwnProperty("extent")&&this._validExtent(a.extent))e.extent=new Q(a.extent),e.extent.setSpatialReference(d);else if(e.feature&&e.feature.geometry)switch(e.feature.geometry.type){case "extent":e.extent=e.feature.geometry;break;case "multipoint":e.extent=O.getDenormalizedExtent(e.feature.geometry);
break;case "polygon":e.extent=O.getDenormalizedExtent(e.feature.geometry);break;case "polyline":e.extent=O.getDenormalizedExtent(e.feature.geometry);break;case "point":this.map?(d=this.zoomScale,b&&b.zoomScale&&(d=b.zoomScale),this._getScale()>d?e.extent=R.getExtentForScale(this.map,d).centerAt(e.feature.geometry):e.extent=this.map.extent.centerAt(e.feature.geometry)):e.extent=new Q({xmin:e.feature.geometry.x-.25,ymin:e.feature.geometry.y-.25,xmax:e.feature.geometry.x+.25,ymax:e.feature.geometry.y+
.25,spatialReference:this._defaultSR})}else e.extent=null;e.name="";b.featureLayer?b.suggestionTemplate&&c?e.name=B.substitute(a.attributes,b.suggestionTemplate):b.searchTemplate?e.name=B.substitute(a.attributes,b.searchTemplate):(d=this._getDisplayField(b),c=b.featureLayer.getDomain(d),d&&a.hasOwnProperty("attributes")&&a.attributes.hasOwnProperty(d)&&(a=a.attributes[d],e.name=c&&"codedValue"===c.type?this._getCodedName(c.codedValues,a):a)):a.address&&b.searchTemplate?e.name=B.substitute(a.address,
b.searchTemplate):a.hasOwnProperty("name")?e.name=a.name:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&a.attributes.Match_addr?(e.name=a.attributes.Match_addr,a.attributes.Addr_type&&"POI"===a.attributes.Addr_type&&a.attributes.StAddr&&a.attributes.City&&(e.name+=" - "+a.attributes.StAddr+", "+a.attributes.City)):a.hasOwnProperty("address")&&"string"===typeof a.address?e.name=a.address:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Address")?
a.address.hasOwnProperty("Match_addr")?e.name=a.address.Match_addr:a.address.hasOwnProperty("Address")&&(e.name=a.address.Address):e.feature&&e.feature.geometry&&(e.name=e.feature.geometry.x+","+e.feature.geometry.y);b.featureLayer&&e.feature&&I(e.feature,b.featureLayer);return e},_getScale:function(){var a;this.map&&"function"===typeof this.map.getScale&&(a=this.map.getScale());return a},_hydrateResults:function(a,b,c,d){d=[];var e=0;if(a&&a.length)for(e;e<a.length;e++){var k=this._hydrateResult(a[e],
b,c);d.push(k)}return d},_containsNonLatinCharacter:function(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1},_setPlaceholder:function(a){var b="",c=this.sources[a];a===this._allIndex?b=this.allPlaceholder||A.widgets.Search.main.allPlaceholder:c&&c.placeholder&&(b=c.placeholder);var e=A.widgets.Search.main.all;c&&(e=this._getSourceName(a));d.set(this.sourceNameNode,"textContent",e);d.set(this.inputNode,"placeholder",b);d.set(this.inputNode,"title",b)},_updateActiveSource:function(){var a=
this.sources,b=this.activeSourceIndex,c;a&&a[b]&&(c=a[b]);c?this.set("activeSource",c):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(a){a?(b.toggle(this.containerNode,this.css.searchExpanded,this.expanded),b.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),b.add(this.containerNode,this.css.hasButtonMode)):(b.remove(this.containerNode,this.css.searchExpanded),b.remove(this.containerNode,this.css.searchCollapsed),
b.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(a){a&&1===a.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(a){this._set("enableSourcesMenu",a);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(a){this._set("enableSearchingAll",a);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},
_setSourcesAttr:function(a){this._createSourceNameMap(a).then(f.hitch(this,function(b){this._sourceNames=b;this._created&&(this._setDefaultActiveSourceIndex(a),this._hideMenus(),this._insertSources(a))}));this._set("sources",a)},_setAllPlaceholderAttr:function(a){this._set("allPlaceholder",a);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(a){this._set("activeSourceIndex",a);this._updateActiveSource();this._created&&(this._setPlaceholder(a),this._hideMenus(),
this._insertSources(this.sources))},_setMaxLengthAttr:function(a){this._set("maxLength",a);this._created&&d.set(this.inputNode,"maxLength",a)},_setValueAttr:function(a){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",a);this._created&&(d.set(this.inputNode,"value",a),this._checkStatus())},_setVisibleAttr:function(a){this._set("visible",a);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(a){this._set("enableButtonMode",a);this._created&&this._updateButtonMode(a)},
_setThemeAttr:function(a){this._created&&(b.remove(this.domNode,this.theme),b.add(this.domNode,a));this._set("theme",a)}});z("extend-esri")&&f.setObject("dijit.Search",h,L);return h})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(t,h,f){var m=t.forEach;return function(v){function t(b,k){x[k]=b;c.progress([b,k]);0===--d&&c.resolve(x)}var n,q;v instanceof Array?q=v:v&&"object"===typeof v&&(n=v);var x,z=[];if(n){q=[];for(var r in n)Object.hasOwnProperty.call(n,
r)&&(z.push(r),q.push(n[r]));x={}}else q&&(x=[]);if(!q||!q.length)return(new h).resolve(x);var c=new h;c.promise.always(function(){x=z=null});var d=q.length;m(q,function(b,c){n||z.push(c);f(b,function(b){t(b,z[c])},function(b){t(b,z[c])})});return c.promise}})},"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(t,h,f,m,v){function y(f,c){var d;if(f)switch(d={},d.color=new v(f.color),d.opacity=f.opacity||1,c){case "point":d.outline=
{color:new v(f.outline.color),width:f.outline.width};d.size=f.size;break;case "line":d.width=f.width;break;case "polygon":d.outline={color:new v(f.outline.color),width:f.outline.width}}return d}function n(f){"esriGeometryPoint"===f||"esriGeometryMultipoint"===f?f="point":"esriGeometryPolyline"===f?f="line":"esriGeometryPolygon"===f&&(f="polygon");return f}var q={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,1],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,1],width:1},opacity:.8},
{color:[255,255,255,1],outline:{color:[128,128,128,1],width:1},opacity:.8}]},dark:{primary:{color:[227,139,79,1],outline:{color:[51,51,51,1],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[51,51,51,1],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,1],width:1},opacity:.8}]}}}},x={};(function(){var f,c,d,b,k,h,m,n;for(f in q)for(b in c=q[f],d=c.basemapGroups,k=x[f]={basemaps:[].concat(d.light).concat(d.dark),point:{},line:{},polygon:{}},d)for(h=d[b],m=0;m<
h.length;m++)n=h[m],c.pointSchemes&&(k.point[n]=c.pointSchemes[b]),c.lineSchemes&&(k.line[n]=c.lineSchemes[b]),c.polygonSchemes&&(k.polygon[n]=c.polygonSchemes[b])})();var z={getAvailableThemes:function(f){var c=[],d,b,k;for(d in q)b=q[d],k=x[d],f&&-1===t.indexOf(k.basemaps,f)||c.push({name:b.name,label:b.label,description:b.description,basemaps:k.basemaps.slice(0)});return c},getSchemes:function(f){var c=f.theme,d=f.basemap,b=n(f.geometryType);f=x[c];var k;(f=(f=f&&f[b])&&f[d])&&(k={primaryScheme:y(f.primary,
b),secondarySchemes:t.map(f.secondary,function(c){return y(c,b)})});return k},cloneScheme:function(f){var c;f&&(c=h.mixin({},f),c.color&&(c.color=new v(c.color)),c.outline&&(c.outline={color:c.outline.color&&new v(c.outline.color),width:c.outline.width}));return c}};f("extend-esri")&&h.setObject("styles.basic",z,m);return z})},"jimu/dijit/ServiceURLComboBox":function(){define(["dojo/_base/declare","dojo/_base/html","dijit/form/ComboBox","jimu/dijit/ServiceURLInput"],function(t,h,f,m){return t([m,
f],{declaredClass:"jimu.dijit.ServiceURLComboBox",postCreate:function(){this.inherited(arguments);h.addClass(this.domNode,"jimu-dijit-ServiceURLComboBox")},setProcessFunction:function(){this.inherited(arguments)}})})},"widgets/Directions/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Directions/setting/PresetDestinations.html":'\x3cdiv\x3e\r\n  \x3cspan style\x3d"margin:10px 0 5px 0px;display:inline-block;font-weight:bold;"\x3e${nls.presetDestinations}\x3c/span\x3e\r\n  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n    \x3ctbody\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd style\x3d"width:50%;"\x3e\r\n        \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n          \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"width:200px;"\x3e\r\n              \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.startPoint}\x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd style\x3d"width:auto;"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"startSearchDom" style\x3d"width:220px;"\x3e\x3c/span\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"startSearchResultsNode" class\x3d"searchResults arcgisSearch"\x3e\x3c/div\x3e\r\n              \x3c!--\x3cdiv data-dojo-attach-point\x3d"startSearchError" class\x3d"hide preset-des-error"\x3eNo Results\x3c/div\x3e--\x3e\r\n            \x3c/td\x3e\r\n\r\n            \x3ctd style\x3d"width:200px;"\x3e\r\n              \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.endPoint}\x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd style\x3d"width:auto;"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"endSearchDom" class\x3d"end-search" style\x3d"width:220px;"\x3e\x3c/span\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"endSearchResultsNode" class\x3d"searchResults arcgisSearch"\x3e\x3c/div\x3e\r\n              \x3c!--\x3cdiv data-dojo-attach-point\x3d"endSearchError" class\x3d"hide preset-des-error"\x3eNo Results\x3c/div\x3e--\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Directions/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:auto;"\x3e\r\n\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"187px" /\x3e\r\n\t\t\t\x3ccol width\x3d"auto" /\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.routeUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"route-td"\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"routeUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLComboBox"\r\n\t\t\t\t\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true;hasDownArrow:false;autoComplete:true"\r\n\t\t\t\t\t\t\t\t\tid\x3d"routeLayer" name\x3d"routeLayer" style\x3d"width:100%;height:30px;"\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.locatorUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"locator-td"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLComboBox"\r\n\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true" type\x3d"text" style\x3d"width:100%;" placeHolder\x3d"${_locatorUrl}" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.travelModesUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"travelmodes-td"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"travelModesUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLInput"\r\n\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true" type\x3d"text" style\x3d"width:100%;"/\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.trafficLayerUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"trafficlayer-td"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"trafficLayerUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLInput"\r\n\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true" type\x3d"text" style\x3d"width:100%;"/\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cspan style\x3d"margin:10px 0 5px 0;display:inline-block;font-weight:bold;"\x3e${nls.geocoderOptions}\x3c/span\x3e\r\n\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;" class\x3d"auto-complete-td" data-dojo-attach-point\x3d"autoCompleteTd"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.autoComplete}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"search-delay"\x3e${nls.searchDelay}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"searchDelay" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d\'required:true,value:350,smallDelta:1,largeDelta:10,constraints:{min:10},intermediateChanges:true\' type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.maximumSuggestions}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"maximumSuggestions" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d\'required:true,value:6,smallDelta:1,largeDelta:1,constraints:{min:1},intermediateChanges:true\' type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"min-characters jimu-ellipsis"\x3e${nls.minCharacters}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"minCharacters" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d\'required:true,value:3,smallDelta:1,largeDelta:1,constraints:{min:3},intermediateChanges:true\' type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.placeholder}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cspan style\x3d"margin:10px 0 5px 0px;display:inline-block;font-weight:bold;"\x3e${nls.routeOptions}\x3c/span\x3e\r\n\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.directionsLanguage}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"directionsLanguage" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true\' style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable  style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"length-units jimu-ellipsis"\x3e${nls.directionsLengthUnits}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"directionsLengthUnits" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:220px;height:30px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriFeet"\x3e${nls.feet}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriKilometers" selected\x3e${nls.kilometers}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriMeters"\x3e${nls.meters}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriNauticalMiles"\x3e${nls.nauticalMiles}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriYards"\x3e${nls.yards}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.directionsOutputType}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"directionsOutputType" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:220px;height:30px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"standard" selected\x3e${nls.standard}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"complete"\x3e${nls.complete}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"complete-no-events"\x3e${nls.completeNoEvents}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"instructions-only"\x3e${nls.instructionsOnly}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"summary-only"\x3e${nls.summaryOnly}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.impedanceAttribute}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"impedanceAttribute" data-dojo-type\x3d"dijit/form/ValidationTextBox"  style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"presetDestinations"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Directions/setting/css/style.css":".jimu-widget-directions-setting{margin-bottom: 20px;}.jimu-widget-directions-setting \x3e table \x3e tbody \x3e tr \x3e td{padding:5px 0;}.jimu-widget-directions-setting .route-td{padding-left: 10px;}.jimu-widget-directions-setting .jimu-ellipsis{white-space: normal;}.jimu-rtl .jimu-widget-directions-setting .route-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .locator-td{padding-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .locator-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .travelmodes-td{padding-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .travelmodes-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .trafficlayer-td{padding-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .trafficlayer-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .auto-complete-td span{margin-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .auto-complete-td span{margin-left: 0px; margin-right: 10px;}.jimu-widget-directions-setting .searchResults.arcgisSearch{position: relative;}.jimu-widget-directions-setting .arcgisSearch{width: 220px;}.jimu-widget-directions-setting .arcgisSearch .searchMenu {position: absolute;}.jimu-widget-directions-setting .arcgisSearch .searchMenu.searchResultsMenu{width: 220px !important;}.jimu-widget-directions-setting .arcgisSearch .showNoResults .noResultsMenu{height: 122px;}.jimu-widget-directions-setting .arcgisSearch .hasValue.showNoResults .noResultsMenu{display: block !important;}.jimu-widget-directions-setting .arcgisSearch .searchGroup .searchInput{width:145px; border-radius: 0; border-left: 6px green solid;}.jimu-widget-directions-setting .end-search .arcgisSearch .searchGroup .searchInput{border-left: 6px red solid;}.jimu-rtl .jimu-widget-directions-setting .arcgisSearch .searchGroup .searchInput{border-left: none; border-right: 6px green solid;}.jimu-rtl .jimu-widget-directions-setting .end-search .arcgisSearch .searchGroup .searchInput{border-left: none; border-right: 6px red solid;}.jimu-widget-directions-setting .arcgisSearch .searchBtn{border-radius: 0; border-left: 0; padding: 6px;}.jimu-rtl .jimu-widget-directions-setting .arcgisSearch .searchBtn{border-right: 0; border-left: 1px solid #57585A;}.jimu-widget-directions-setting .arcgisSearch .searchClear{display: none;}.jimu-widget-directions-setting .hide{display: none;}.jimu-widget-directions-setting .preset-des-error{color:red;}",
"*now":function(t){t(['dojo/i18n!*preload*widgets/Directions/setting/nls/Setting*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/config dojo/Deferred dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/utils jimu/portalUtils ./PresetDestinations jimu/dijit/Message jimu/dijit/CheckBox jimu/dijit/ServiceURLComboBox jimu/dijit/ServiceURLInput dijit/form/NumberSpinner dijit/form/ValidationTextBox dijit/form/Select".split(" "),function(t,h,f,m,v,y,n,q,x,z,r,c,d){return t([q,n],{baseClass:"jimu-widget-directions-setting",_ROUTE_WORLD:"Route_World",
_serviceUrlInputInvalidClass:"jimu-serviceurl-input-invalid",_routeTaskUrl:"http://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/",_locatorUrl:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",_travelModesUrl:"http://logistics.arcgis.com/arcgis/rest/services/World/Utilities/GPServer",_trafficLayerUrl:"http://traffic.arcgis.com/arcgis/rest/services/World/Traffic/MapServer",postMixInProperties:function(){this.nls.complete||(this.nls.complete="Complete");this.nls.completeNoEvents||
(this.nls.completeNoEvents="Complete No Events");this.nls.instructionsOnly||(this.nls.instructionsOnly="Instructions Only");this.nls.standard||(this.nls.standard="Standard");this.nls.summaryOnly||(this.nls.summaryOnly="Summary Only");this.nls.travelModesUrl||(this.nls.travelModesUrl="Travel Modes URL");this.nls.example||(this.nls.example=this.nls.optional+" "+window.jimuNls.basicServiceChooser.example+" : ")},postCreate:function(){this.inherited(arguments);this.autoComplete=new d;this.autoComplete.placeAt(this.autoCompleteTd,
"first");m.addClass(this.autoComplete.domNode,"class","jimu-float-leading");this.portal=z.getPortal(this.appConfig.portalUrl);this.routeUrl.setProcessFunction(h.hitch(this,function(b){var c=!1;b&&b.data&&(c="esriNAServerRouteLayer"===b.data.layerType);if(!0===c)return c;this._setRouteUrl(b);b=this._getHandledUrlFromServiceUrlInput(this.routeUrl);return/\/rest\/services\/.+\/NAServer/i.test(b)}));this.locatorUrl.setProcessFunction(h.hitch(this,function(){var b=this._getHandledUrlFromServiceUrlInput(this.locatorUrl);
return/\/rest\/services\/.+\/GeocodeServer/gi.test(b)}));this.travelModesUrl.setProcessFunction(h.hitch(this,function(){var b=this._getHandledUrlFromServiceUrlInput(this.travelModesUrl);return/\/rest\/services\/.+\/GPServer/gi.test(b)}),h.hitch(this,function(){this.travelModesUrl.get("value")||m.removeClass(this.travelModesUrl.domNode,this._serviceUrlInputInvalidClass)}));this.trafficLayerUrl.setProcessFunction(h.hitch(this,function(){var b=this._getHandledUrlFromServiceUrlInput(this.trafficLayerUrl);
return/\/rest\/services\/.+\/MapServer/gi.test(b)}),h.hitch(this,function(){this.trafficLayerUrl.get("value")||m.removeClass(this.trafficLayerUrl.domNode,this._serviceUrlInputInvalidClass)}));this.portal.loadSelfInfo().then(h.hitch(this,function(b){var c=this._getRouteUrlFromPortalSelf(b);c&&this.routeUrl.set("placeHolder",c);(c=this._getLocatorUrlFromPortalSelf(b))&&this.locatorUrl.set("placeHolder",c);(c=this._getTravelModesUrlFromPortalSelf(b))?this.travelModesUrl.set("placeHolder",this.nls.example+
c):this.travelModesUrl.set("placeHolder",this.nls.example+this._travelModesUrl);(b=this._getTrafficLayerUrlFromPortalSelf(b))?this.trafficLayerUrl.set("placeHolder",this.nls.example+b):this.trafficLayerUrl.set("placeHolder",this.nls.example+this._trafficLayerUrl)}));this.presetDestinations=new r({nls:this.nls,defaultLocations:this.config.defaultLocations},this.presetDestinations);this.presetDestinations.startup()},_getHandledUrlFromServiceUrlInput:function(b){b=b.get("value");return x.removeSuffixSlashes(b)},
startup:function(){this.inherited(arguments);this._setPresetDestinationsSources();this.setConfig(this.config)},setConfig:function(b){if(this.config=b)(b=this.config.geocoderOptions)&&"object"===typeof b&&(this.autoComplete.setValue(!0===b.autoComplete),this.maximumSuggestions.set("value",b.maxLocations),this.minCharacters.set("value",b.minCharacters),this.searchDelay.set("value",b.searchDelay),(b=b.geocoders)&&0<b.length&&this.placeholder.set("value",b[0].placeholder||"")),(b=this.config.routeOptions)&&
"object"===typeof b&&(this.directionsLanguage.set("value",b.directionsLanguage||v.locale||"en_us"),this.directionsLengthUnits.set("value",b.directionsLengthUnits),this.directionsOutputType.set("value",b.directionsOutputType),this.impedanceAttribute.set("value",b.impedanceAttribute)),this._getRouteTaskUrl().then(h.hitch(this,function(b){this.routeUrl.set("value",b)})),this._getLocatorUrl().then(h.hitch(this,function(b){this.locatorUrl.set("value",b)})),this.config.travelModesUrl&&this.travelModesUrl.set("value",
this.config.travelModesUrl),this.config.routeTaskUrl||this.placeholder.get("value")||this.placeholder.set("value",this.nls.searchPlaceholder),this.config.trafficLayerUrl&&this.trafficLayerUrl.set("value",this.config.trafficLayerUrl)},_getRouteTaskUrl:function(){var b=new y;this.config.routeTaskUrl?b.resolve(this.config.routeTaskUrl):this.portal.loadSelfInfo().then(h.hitch(this,function(c){(c=this._getRouteUrlFromPortalSelf(c))?b.resolve(c):b.resolve(this._routeTaskUrl)}),h.hitch(this,function(c){console.error(c);
b.resolve(this._routeTaskUrl)}));return b},_suffixWithSlant:function(b,c){return b=this._endsWith(b,"/")?b+c:b+("/"+c)},_endsWith:function(b,c){return-1!==b.indexOf(c,b.length-c.length)},_getRouteUrlFromPortalSelf:function(b){var c="";b&&b.helperServices&&(b=b.helperServices.route)&&b.url&&(c=b.url);return c},_getLocatorUrl:function(){var b=new y,c=this.config.geocoderOptions&&this.config.geocoderOptions.geocoders&&this.config.geocoderOptions.geocoders[0];(c=c&&c.url)?b.resolve(c):this.portal.loadSelfInfo().then(h.hitch(this,
function(c){(c=this._getLocatorUrlFromPortalSelf(c))?b.resolve(c):b.resolve(this._locatorUrl)}),h.hitch(this,function(c){console.error(c);b.resolve(this._locatorUrl)}));return b},_getLocatorUrlFromPortalSelf:function(b){if(b&&b.helperServices){b=b.helperServices.geocode;for(var c=0,d=b.length;c<d;c++){var f=b[c];this.locatorUrl.store.put({id:c,name:f.url,value:f.url})}}return""},_getTravelModesUrlFromPortalSelf:function(b){var c="";b&&b.helperServices&&(b=b.helperServices.routingUtilities)&&b.url&&
(c=b.url);return c},_getTrafficLayerUrlFromPortalSelf:function(b){var c="";b&&b.helperServices&&(b=b.helperServices.traffic)&&b.url&&(c=b.url);return c},getConfig:function(){return"valid"!==this.routeUrl.getStatus()?(this._showValidationErrorTip(this.routeUrl),this._showParametersTip(),!1):"valid"!==this.locatorUrl.getStatus()?(this._showValidationErrorTip(this.locatorUrl),this._showParametersTip(),!1):this.travelModesUrl.get("value")&&"valid"!==this.travelModesUrl.getStatus()?(this._showValidationErrorTip(this.travelModesUrl),
this._showParametersTip(),!1):this.trafficLayerUrl.get("value")&&"valid"!==this.trafficLayerUrl.getStatus()?(this._showValidationErrorTip(this.trafficLayerUrl),this._showParametersTip(),!1):this.searchDelay.validate()?this.maximumSuggestions.validate()?this.minCharacters.validate()?this.directionsLanguage.validate()?this.presetDestinations&&!1===this.presetDestinations.validate()?!1:this.config={routeTaskUrl:this._getHandledUrlFromServiceUrlInput(this.routeUrl),travelModesUrl:this._getHandledUrlFromServiceUrlInput(this.travelModesUrl),
trafficLayerUrl:this._getHandledUrlFromServiceUrlInput(this.trafficLayerUrl),routeOptions:{directionsLanguage:this.directionsLanguage.get("value"),directionsLengthUnits:this.directionsLengthUnits.get("value"),directionsOutputType:this.directionsOutputType.get("value"),impedanceAttribute:this.impedanceAttribute.get("value")},geocoderOptions:{autoComplete:this.autoComplete.getValue(),maxLocations:this.maximumSuggestions.get("value"),minCharacters:this.minCharacters.get("value"),searchDelay:this.searchDelay.get("value"),
arcgisGeocoder:!1,geocoders:[{url:this._getHandledUrlFromServiceUrlInput(this.locatorUrl),placeholder:this.placeholder.get("value")}]},defaultLocations:this.presetDestinations.getValue()}:(this._showValidationErrorTip(this.directionsLanguage),this._showParametersTip(),!1):(this._showValidationErrorTip(this.minCharacters),this._showParametersTip(),!1):(this._showValidationErrorTip(this.maximumSuggestions),this._showParametersTip(),!1):(this._showValidationErrorTip(this.searchDelay),this._showParametersTip(),
!1)},_showValidationErrorTip:function(b){!b.validate()&&b.domNode&&b.focusNode&&(b.focusNode.focus(),setTimeout(h.hitch(this,function(){b.focusNode.blur()}),100))},_showParametersTip:function(){new c({message:this.nls.parametersTip})},_setRouteUrl:function(b){if(b&&b.data&&b.data.routeLayers){for(var c=this.routeUrl.getValue(),d=!1,f=0,h=b.data.routeLayers.length;f<h;f++){var m=b.data.routeLayers[f],n={id:m,name:this._suffixWithSlant(c,m),value:this._suffixWithSlant(c,m)};m===this._ROUTE_WORLD&&(d=
!0);this.routeUrl.store.put(n)}d&&this.routeUrl.setValue(this._suffixWithSlant(c,this._ROUTE_WORLD))}},_setPresetDestinationsSources:function(){this.own(f(this.locatorUrl,"Fetch",h.hitch(this,function(b){if(b&&b.url){var c="";b.data&&b.data.singleLineAddressField&&b.data.singleLineAddressField.name&&(c=b.data.singleLineAddressField.name);this.presetDestinations.setSources({url:b.url,singleLineFieldName:c})}})))}})});