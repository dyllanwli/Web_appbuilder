// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(n,h,l,c,a,g,d,k){return n([c,d],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,postCreate:function(){this.inherited(arguments);this._coordinates={};var a={settings:{hasHeaders:!1,
resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:this.layoutDefinition};require(["libs/goldenlayout/goldenlayout"],h.hitch(this,function(d){this._layout=new d(a,this.container);this._layout.registerComponent("jimu grid",h.hitch(this,function(a,b){var e;a.parent.config.id=b.id;l.some(this.components,function(d){if(d.id===b.id)return e=d.dijit,a.getElement().html(d.dijit.domNode),!0},this);
a.on("resize",k(h.hitch(this,function(){0<a.width&&0<a.height&&e&&"function"===typeof e.resize&&e.resize(a.width,a.height)}),200));a.on("select",h.hitch(this,function(){this.editable&&a.parent.select();this.emit("mask-click",a.parent.config.id)}))}));this._layout.on("initialised",h.hitch(this,function(){this._resetCoordinate();this.emit("initialised")}));this._layout.on("stateChanged",h.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||g.add(this._layout.root.childElementContainer[0],
"viewonly");g.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(h.hitch(this,this.resize),100)}))},destroy:function(){l.forEach(this.components,function(a){a.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var d=a.getMarginBox(this.container);this._layout.updateSize(d.w,d.h)},getComponentSize:function(a){return(a=this._layout.root.contentItems[0].getItemsById(a))&&
0<a.length?(a=a[0].container,{w:a.width,h:a.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(a,d){var f=this._layout.root.contentItems[0].getItemsById(a);f&&0<f.length&&!1===d?this._hideComponent(f[0]):f&&0!==f.length||!0!==d||this._showComponent(a)},_hideComponent:function(a){a.parent&&a.parent.removeChild(a,!0)},_showComponent:function(a){var d,f,b,e,c,m,k;l.some(this.components,function(b){if(b.id===a)return d=b,!0},this);d&&(e={id:a,
type:"component",componentName:"jimu grid",componentState:{id:a}},f=this._coordinates[a],c=this._layout.root,f?(f[0].type!==c.contentItems[0].type&&(m=c.contentItems[0],c.replaceChild(m,{type:f[0].type,content:[]}),c.contentItems[0].addChild(m)),b=c,l.forEach(f,function(a){k=a.index<=b.contentItems.length?a.index:b.contentItems.length;"component"===a.type?b.addChild(e,k):("stack"!==a.type&&b.contentItems[a.index].type===a.type||b.addChild({type:a.type,content:[]},k),b=b.contentItems[k])},this)):("stack"===
c.contentItems[0].type&&(m=c.contentItems[0],c.replaceChild(m,{type:"column",content:[]}),c.contentItems[0].addChild(m)),c.contentItems[0].addChild(e)))},_resetCoordinate:function(){var a=this._layout.root.getItemsByType("component"),d=function(a,b){var e=a.parent;e&&(l.some(e.contentItems,function(e,d){if(e===a)return b.push({type:e.type,index:d}),!0}),d(e,b))};l.forEach(a,function(a){var b=[];d(a,b);this._coordinates[a.config.id]=b.reverse()},this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),
function(n,h,l,c,a,g,d){var k={},m={},q=null,f=null,b=null,e=null,p={};k._dijits=m;k.createDijit=function(k){if(m[k.id])return m[k.id];var r;switch(k.type){case "text":r=l;break;case "image":r=c;break;case "chart":r=a;break;case "gauge":r=g;break;case "number":r=d}if(!r)return console.error("Unknow type:",k.type),null;var w={nls:q,config:k.config,map:f,inSettingPage:b,appConfig:e,jsonId:k.id};h.mixin(w,p);r=new r(w);n.after(r,"destroy",function(){delete m[k.id]});return m[k.id]=r};k.setNls=function(b){q=
b};k.setMap=function(b){f=b;Object.keys(m).forEach(function(b){m[b].setMap(f)})};k.setInSettingPage=function(a){b=a;Object.keys(m).forEach(function(a){m[a].setInSettingPage(b)})};k.setAppConfig=function(b){e=b;Object.keys(m).forEach(function(b){m[b].setAppConfig(e)})};k.setContext=function(b){p=b;Object.keys(m).forEach(function(b){h.mixin(m[b],p)})};return k})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(n,
h,l,c){return n([l],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(a){this.config=a;h.empty(this.domNode);h.addClass(this.domNode,"table-layout-container");h.addClass(this.domNode,"no-trim");this.innerDom=h.create("div",{},this.domNode);h.place(this.innerDom,this.domNode);a={};c.background.setStyle(this.config.background,a,this);c.font.setStyle(this.config.font,a);c.font.setText(this.config,this);h.setStyle(this.innerDom,
a)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(n,h,l){return n([h,l],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(c){this.config=c.config},setInSettingPage:function(c){this.inSettingPage=c},setConfig:function(c){this.config=c},setMap:function(c){this.map=c},setDataSource:function(c){this.dataSource=c},
resize:function(){},setAppConfig:function(c){this.appConfig=c},onDataSourceDataUpdate:function(c){this.data=c},isDarkTheme:function(){var c=!1;this.appConfig&&("DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(c=!0):c=!0);return c}})})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on","dojo/_base/lang","jimu/utils"],function(n,h,l){var c={background:{setStyle:function(a,
g,d){if(!a)return{};g||(g={});c.background.setBackgroundColor(a,g);c.background.setAlignment(a,g);c.background.setLink(a,g,d)},setBackgroundColor:function(a,c){a.backgroundColor&&(c.backgroundColor=a.backgroundColor)},setAlignment:function(a,c){if(a.alignment){if(a.alignment.horizontal)switch(a.alignment.horizontal){case "left":c.textAlign="left";break;case "center":c.textAlign="center";break;case "right":c.textAlign="right";break;default:c.textAlign="center"}if(a.alignment.vertical)switch(c.display=
"table-cell",a.alignment.vertical){case "top":c.verticalAlign="top";break;case "middle":c.verticalAlign="middle";break;case "bottom":c.verticalAlign="bottom";break;default:c.verticalAlign="middle"}}},setLink:function(a,c,d){d.clickHanlder&&(d.clickHanlder[0]&&d.clickHanlder[0].remove(),d.clickHanlder=null,c.cursor="auto");a.link&&(d.clickHanlder=d.own(n(d.domNode,"click",h.hitch(d,function(){window.open(a.link)}))),c.cursor="pointer")}},font:{setText:function(a,c){var d="";a.text&&(d=a.text);c.innerDom.innerHTML=
d},setStyle:function(a,g){if(!a)return{};g||(g={});c.font.setFont(a,g);c.font.setTextColor(a,g);c.font.setFontSize(a,g)},setFont:function(a,c){c.fontWeight="normal";c.fontStyle="normal";c.textDecoration="none";a.font&&(a.font.fontFamily&&(c.fontFamily=a.font.fontFamily),a.font.bold&&(c.fontWeight="bold"),a.font.italic&&(c.fontStyle="italic"),a.font.underline&&(c.textDecoration="underline"))},setTextColor:function(a,c){a.textColor&&(c.color=a.textColor)},setFontSize:function(a,c){a.fontSize&&(c.fontSize=
a.fontSize+"px")}},image:{setStyle:function(a,g,d){if(!a)return{};g||(g={});c.image.setBackgroundImg(a,g,d);c.image.setAlignment(a,g)},setBackgroundImg:function(a,c,d){var k="";if(k=a&&!a.image&&d&&d.folderUrl?"url("+d.folderUrl+"/images/default_image.png)":"url("+l.processUrlInWidgetConfig(a.image,d.folderUrl)+")")c.backgroundImage=k,c.backgroundRepeat="no-repeat",c.backgroundSize="contain"},setAlignment:function(a,c){if(a&&a.background){var d="center",k="center";if(a.background.alignment){a.background.alignment.horizontal&&
(d=a.background.alignment.horizontal);if(a.background.alignment.vertical)switch(a.background.alignment.vertical){case "top":k="top";break;case "middle":k="center";break;case "bottom":k="bottom";break;default:c.verticalAlign="center"}c.backgroundPosition=d+" "+k}}}},dataFormat:{getText:function(a,g){var d="";a.dataFormat&&(d=g?g:a.text,d=c.dataFormat.setDataFomat(a,d),a.dataFormat.prefix&&(d=a.dataFormat.prefix+" "+d),a.dataFormat.suffix&&(d=d+" "+a.dataFormat.suffix));return d},setDataFomat:function(a,
c){var d=a.dataFormat.unit;"none"===a.dataFormat.unit?d="":"percentage"===a.dataFormat.unit&&(d="%");return c=c+d+"("+a.dataFormat.decimalPlaces+") "}}};return c})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(n,h,l,c){return n([l],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(a){this.config=a.config},postCreate:function(){this.setConfig(this.config)},setConfig:function(a){this.config=
a;this.domNode.innerHTML="";h.addClass(this.domNode,"table-layout-container");this.innerDom=h.create("div",{"class":"image-node"},this.domNode);h.place(this.innerDom,this.domNode);a={};c.background.setStyle(this.config.background,a,this);c.image.setStyle(this.config,a,this);h.setStyle(this.innerDom,a)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./BaseDijit jimu/dijit/StatisticsChart jimu/DataSourceManager jimu/LayerInfos/LayerInfos".split(" "),
function(n,h,l,c,a,g,d,k){return c([a],{templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3c/div\x3e',type:"chart",baseClass:"infographic-chart-dijit",layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,dataSource:null,config:null,map:null,dataSourceType:"",featureLayer:null,constructor:function(a){this.config=a.config;this.layerInfosObj=k.getInstanceSync();this.dataSourceManager=d.getInstance()},postCreate:function(){this.inherited(arguments);
this.domNode.style.width="100%";this.domNode.style.height="100%";var a={_legendNls:this.nls.legend,theme:this._getChartTheme(),map:null,isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1};this.inSettingPage||(a.map=this.map);this.chart=new g(a);this.chart.placeAt(this.domNode);this._updateBackgroundColor()},_getChartTheme:function(){return this.isDarkTheme()?"dark":"light"},clearChart:function(){this._showNodata()},startup:function(){this.inherited(arguments);setTimeout(n.hitch(this,
function(){this.chart.resizeByParent();this.inSettingPage?this._tryUpdateStatisticsChart():this.dataSource&&this.setDataSource(this.dataSource)}),200)},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},resize:function(){this.chart&&this.chart.resizeByParent()},setDataSource:function(a){this.dataSourceType="";this.featureLayer=null;this.inherited(arguments);if(a)if(a.layerId)this._setDataSourceForLayerId(a);else if(a.frameWorkDsId){var d=this._getDsTypeInfoAndDsMeta(a.frameWorkDsId),
c=d.dsTypeInfo,d=d.dsMeta;c&&d&&("Features"===d.type?this._setDataSourceForFrameworkFeatures(a,c,d):"FeatureStatistics"===d.type&&this._setDataSourceForFeatureStatistics(a,c,d))}},_getDsTypeInfoAndDsMeta:function(a){var d={dsTypeInfo:null,dsMeta:null};d.dsTypeInfo=this.dataSourceManager.parseDataSourceId(a);var c=this.appConfig.dataSource&&this.appConfig.dataSource.dataSources;c&&(d.dsMeta=c[a]);return d},_updateBackgroundColor:function(){this.config&&this.config.backgroundColor&&this.setBackgroundColor(this.config.backgroundColor)},
setBackgroundColor:function(a){this.domNode.style.backgroundColor=a},setConfig:function(a){this.config=a;this._updateBackgroundColor();this._tryUpdateStatisticsChart()},onDataSourceDataUpdate:function(a){this.inherited(arguments);"CLIENT_FEATURES"===this.dataSourceType?this._onDataUpdateForClientFeatures(a):"FRAMEWORK_STATISTICS"===this.dataSourceType?this._onDataUpdateForFrameworkStatistics(a):"FRAMEWORK_FEATURES"===this.dataSourceType&&this._onDataUpdateForFrameworkFeatures(a)},_tryUpdateStatisticsChart:function(){this._hideNodata();
var a=this._getChartConfigFromConfig();a?this.domNode.parentNode?this.data?(this.data.features||(this.data.features=[]),0<this.data.features.length?"CLIENT_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForClientFeatures(a):"FRAMEWORK_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForFrameworkFeatures(a):"FRAMEWORK_STATISTICS"===this.dataSourceType&&this._tryUpdateStatisticsChartForFrameworkStatistics(a):this._showMockData(a)):this._showNodata():this._showNodata():this._showNodata()},
_getNodataTextColor:function(){var a="";this.config&&(a="pie"===this.config.type?this.config.dataLabelColor:this.config.horizontalAxisTextColor||this.config.verticalAxisTextColor);a||(a="#666");return a},_getChartConfigFromConfig:function(){var a=null;if(this.config&&this.config.mode&&this.config.type){var a=n.clone(this.config),d=a.type,c=["backgroundColor","colors","showLegend","legendTextColor"],c="pie"===d?c.concat(["showDataLabel","dataLabelColor"]):c.concat(["showHorizontalAxis","horizontalAxisTextColor",
"showVerticalAxis","verticalAxisTextColor"]),b={};a.types=[{type:d,display:b}];l.forEach(c,n.hitch(this,function(e){b[e]=a[e];delete a[e]}))}return a},_hasFeatures:function(){return this.data&&this.data.features&&0<=this.data.features.length},_showNodata:function(){h.addClass(this.domNode,"no-data");this.chart.clear()},_hideNodata:function(){h.removeClass(this.domNode,"no-data")},_showMockData:function(a){a=n.clone(a);var d=[];a.labelField&&d.push(a.labelField);a.categoryField&&d.push(a.categoryField);
a.valueFields&&(d=d.concat(a.valueFields));var c={fields:[]},b={attributes:{}};c.fields=l.map(d,n.hitch(this,function(a){b.attributes[a]=0;return{name:a,type:"esriFieldTypeInteger",alias:a}}));this.chart.resizeByParent();this.chart.createClientCharts(c,[b],a)},_setDataSourceForLayerId:function(a){this.dataSourceType="CLIENT_FEATURES";(a=this.layerInfosObj.getLayerInfoById(a.layerId))&&a.getLayerObject().then(n.hitch(this,function(a){this.featureLayer=a;this._tryUpdateStatisticsChart()}))},_onDataUpdateForClientFeatures:function(){this._tryUpdateStatisticsChart()},
_tryUpdateStatisticsChartForClientFeatures:function(a){if(this.featureLayer){var d=this.data.features;d&&this.inSettingPage&&(d=d.slice(0,this.featuresCountForPreview));this.chart.resizeByParent();this.chart.createClientCharts(this.featureLayer,d,a)}else this._showNodata()},_setDataSourceForFrameworkFeatures:function(){this.dataSourceType="FRAMEWORK_FEATURES";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkFeatures:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForFrameworkFeatures:function(a){var d=
this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;if(d){var c=this.data.features;c&&this.inSettingPage&&(c=c.slice(0,this.featuresCountForPreview));this.chart.resizeByParent();this.chart.createClientCharts(d.dataSchema,c,a)}else this._showNodata()},_setDataSourceForFeatureStatistics:function(){this.dataSourceType="FRAMEWORK_STATISTICS";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkStatistics:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForFrameworkStatistics:function(a){var d=
this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;d?(this.chart.resizeByParent(),this.chart.createServerStatisticsCharts(d.dataSchema,this.data.features,a)):this._showNodata()}})})},"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/graphicsUtils esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/portalUrlUtils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings jimu/dijit/LoadingIndicator".split(" "),
function(n,h,l,c,a,g,d,k,m,q,f,b,e,p,r,C,w,D,y,A,v,B,x,E,F){return c([f,e,p,h],{baseClass:"jimu-dijit-statistics-chart",templateString:r,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",
isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?this.own(n(document.body,"click",a.hitch(this,this._onDocumentBodyClick))):d.destroy(this.settingsIcon);this.showZoomIcon?this.own(n(this.zoominIcon,"click",a.hitch(this,
function(){this.emit("zoomin")}))):d.destroy(this.zoominIcon);this.isBigPreview&&(this.chartContainer.style.maxHeight="auto",d.addClass(this.domNode,"big-preview"));this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;d.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(b,a){if(0<b||"string"===typeof b&&0<b.length)this.domNode.style.width=b;if(0<a||"string"===typeof a&&0<a.length)this.domNode.style.height=
a;this._resize()},resizeByParent:function(){this.domNode.style.width="100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(b,e,d){var c=b.fields,t={type:"Table",fields:[]},f=a.clone(d),p=d.mode;"category"===p?(f.valueFields=[],t.fields=g.map(d.valueFields,a.hitch(this,function(b){var a=d.operation;"average"===a&&(a="avg");var e=b+"_"+a;b=b+"_"+a;
f.valueFields.push(e);return{name:e,type:"esriFieldTypeDouble",alias:b}})),g.some(c,a.hitch(this,function(b){return b.name===d.categoryField?(t.fields.push(b),!0):!1}))):"count"===p?(f.mode="feature",f.labelField=d.categoryField,b=b.fields[0].name+"_count",f.valueFields=[b],g.some(c,a.hitch(this,function(b){return b.name===d.categoryField?(t.fields.push(b),!0):!1})),t.fields.push({name:b,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===p&&(f.valueFields=[],t.fields=g.map(d.valueFields,
a.hitch(this,function(b){var a=d.operation;"average"===a&&(a="avg");var e=b+"_"+a;b=b+"_"+a;f.valueFields.push(e);return{name:e,type:"esriFieldTypeDouble",alias:b}})));return this._getLoadedLayer(t).then(a.hitch(this,function(b){this._createChartsAsync({featureLayer:b,features:e,config:f})}))},createClientCharts:function(b,e,d){return this._getLoadedLayer(b).then(a.hitch(this,function(b){this._createChartsAsync({featureLayer:b,features:e,config:d})}))},_getLoadedLayer:function(b){var e=new l,d=null,
d="string"===typeof b?new A(b):"esri.layers.FeatureLayer"===b.declaredClass?b:new A({layerDefinition:a.clone(b),featureSet:null});d.loaded?e.resolve(d):this.own(n(d,"load",a.hitch(this,function(){e.resolve(d)})));return e},_createChartsAsync:function(b){setTimeout(a.hitch(this,function(){this._createCharts(b)}),0)},_createCharts:function(e){try{this.loading.hide();this.clear();e.features&&(e.features=g.filter(e.features,a.hitch(this,function(b){return!!b.attributes})));this.config=e.config;this.features=
e.features;this.featureLayer=e.featureLayer;this.config.highLightColor||(this.config.highLightColor="#00ffff");this._updatePopupFieldInfos();this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=v.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?d.addClass(this.domNode,this.hasTitleClassName):d.removeClass(this.domNode,this.hasTitleClassName);1>=e.config.types.length?d.addClass(this.domNode,this.noMoreThanOneChartClassName):d.removeClass(this.domNode,
this.noMoreThanOneChartClassName);var c=this._calculateChartBox(),t=c.w+"px",f=c.h+"px",p=g.map(e.config.types,a.hitch(this,function(b){var a=d.create("div",{"class":"chart-div",style:{width:t,height:f}},this.chartContainer),e=d.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");d.place(e,this.pagingUl);e=b.type;b=b.display;b.backgroundColor||(b.backgroundColor="transparent");b.hasOwnProperty("showLegend")||(b.showLegend=!1);b.legendTextColor||(b.legendTextColor=
this.fontColor);"pie"===e?(b.hasOwnProperty("showDataLabel")||(b.showDataLabel=!0),b.dataLabelColor||(b.dataLabelColor=this.fontColor)):(b.hasOwnProperty("showHorizontalAxis")||(b.showHorizontalAxis=!0),b.horizontalAxisTextColor||(b.horizontalAxisTextColor=this.fontColor),b.hasOwnProperty("showVerticalAxis")||(b.showVerticalAxis=!0),b.verticalAxisTextColor||(b.verticalAxisTextColor=this.fontColor));return a})),c=null;"feature"===this.config.mode?c=this._createFeatureModeCharts(e,p):"category"===this.config.mode?
c=this._createCategoryModeCharts(e,p):"count"===this.config.mode?c=this._createCountModeCharts(e,p):"field"===this.config.mode&&(c=this._createFieldModeCharts(e,p));this.charts=c.charts;this.paramsDijits=c.paramsDijits;this.tooltipDialogs=g.map(this.paramsDijits,a.hitch(this,function(a){var e=d.create("div");a.placeAt(e);return new b({content:e})}));e=0;0<=this.initialChartIndex&&this.charts.length>=this.initialChartIndex+1&&(e=this.initialChartIndex);this._showChart(e)}catch(z){console.error(z)}},
_calculateChartBox:function(){var b=d.getContentBox(this.domNode),a=b.h;0<this.resultsHeader.clientHeight&&(a=d.getMarginBox(this.resultsHeader),a=b.h-a.h);b=60;a<b&&(b=a);d.setStyle(this.leftArrow,"height",b+"px");d.setStyle(this.rightArrow,"height",b+"px");d.setStyle(this.chartContainer,"height",a+"px");return d.getContentBox(this.chartContainer)},_updatePopupFieldInfos:function(){this.popupFieldInfosObj={};var b=null;if(this.config.url&&this.map&&this.map.itemInfo&&this.map.itemInfo.itemData){var e=
v.removeSuffixSlashes(this.config.url),e=B.removeProtocol(e),d=this.map.itemInfo.itemData.operationalLayers,c=e.split("/"),f=parseInt(c[c.length-1],10);d&&0<d.length&&g.some(d,a.hitch(this,function(a){var d=a.url;if(d&&(d=v.removeSuffixSlashes(d),d=B.removeProtocol(d),0<=e.indexOf(d)))if(e===d){if(a.popupInfo&&a.popupInfo.fieldInfos)return b=a.popupInfo.fieldInfos,!0}else if(e.length>d.length&&a.layers&&0<=f&&(a=a[f])&&a.popupInfo&&a.popupInfo.fieldInfos)return b=a.popupInfo.fieldInfos,!0;return!1}))}b&&
0<b.length&&g.forEach(b,a.hitch(this,function(b){this.popupFieldInfosObj[b.fieldName]=b}))},_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace={};var b=[];this.config.labelField&&b.push(this.config.labelField);this.config.categoryField&&b.push(this.config.categoryField);this.config.valueFields&&(b=b.concat(this.config.valueFields));var e=g.filter(b,a.hitch(this,function(b){return this._isFloatNumberField(b)})),d={};g.forEach(e,a.hitch(this,function(b){d[b]=[]}));(b=this.features)&&
0<b.length&&g.forEach(b,a.hitch(this,function(b){var c=b.attributes;c&&g.forEach(e,a.hitch(this,function(b){var a=c[b];"number"===typeof a&&d[b].push(a)}))}));g.forEach(e,a.hitch(this,function(b){this.floatNumberFieldDecimalPlace[b]=0;var a=d[b];if(0<a.length)try{var e=this._getBestDecimalPlace(a);this.floatNumberFieldDecimalPlace[b]=e}catch(H){this.floatNumberFieldDecimalPlace[b]=0,console.error(H)}this.popupFieldInfosObj&&(a=this.popupFieldInfosObj[b])&&a.format&&0<=a.format.places&&(this.floatNumberFieldDecimalPlace[b]=
a.format.places)}))},_onDocumentBodyClick:function(b){if(0<=this.currentChartIndex&&this.tooltipDialogs){var a=this.tooltipDialogs[this.currentChartIndex];if(a){var e=!!a.isOpendNow;this._hideAllTooltipDialogs();var c=b.target||b.srcElement;c===this.leftArrow||c===this.rightArrow||d.hasClass(c,"paging-a")||d.hasClass(c,"paging-li")||(c===this.settingsIcon?e?this._hideTooltipDialog(a):this._showTooltipDialog(a):(b=c===a.domNode,c=d.isDescendant(c,a.domNode),b||c?e?this._showTooltipDialog(a):this._hideTooltipDialog(a):
this._hideTooltipDialog(a)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},clear:function(){this.featureLayer=this.features=this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;k("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var b=0;b<this.charts.length;b++)this.charts[b]&&
this.charts[b].destroy(),this.charts[b]=null,this.paramsDijits[b]&&this.paramsDijits[b].destroy(),this.paramsDijits[b]=null,this.tooltipDialogs[b]&&this.tooltipDialogs[b].destroy(),this.tooltipDialogs[b]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];d.empty(this.pagingUl);d.empty(this.chartContainer);d.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showChart:function(b){this.currentChartIndex=-1;var a=k(".chart-div",this.chartContainer);a.style({display:"none"});var e=
k("li",this.pagingUl);e.removeClass("selected");if(!(0>b)){if(a=a[b])this.currentChartIndex=b,d.setStyle(a,"display","block");(e=e[b])&&d.addClass(e,"selected");if(!this.isBigPreview&&(e=null,this.charts&&0<this.charts.length&&(e=this.charts[b]))){b=this._calculateChartBox();var c=d.getContentBox(a);if(b.w!==c.w||b.h!==c.h)this.loading.show(),c=b.w+"px",b=b.h+"px",d.setStyle(a,"width",c),d.setStyle(a,"height",b),e.resize(c,b),this.loading.hide()}}},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&
0<this.tooltipDialogs.length&&g.forEach(this.tooltipDialogs,a.hitch(this,function(b){this._hideTooltipDialog(b)}))},_hideTooltipDialog:function(b){b&&(q.close(b),b.isOpendNow=!1)},_showTooltipDialog:function(b){b&&(q.open({popup:b,around:this.settingsIcon}),b.isOpendNow=!0)},_onPagingUlClicked:function(b){b.stopPropagation();this._hideAllTooltipDialogs();b=b.target||b.srcElement;if("a"===b.tagName.toLowerCase()){var a=k("a",this.pagingUl);b=g.indexOf(a,b);0<=b&&this._showChart(b)}},_onLeftArrowClicked:function(b){b.stopPropagation();
this._hideAllTooltipDialogs();b=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=b&&this._showChart(b)},_onRightArrowClicked:function(b){b.stopPropagation();this._hideAllTooltipDialogs();b=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=b&&this._showChart(b)},_getHighLightMarkerSymbol:function(){var b=y.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",
style:"esriSLSSolid"}});b.setSize(30);b.outline.setColor(new m(this.config.highLightColor));return b},_getHighLightLineSymbol:function(){var b=y.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});b.setColor(new m(this.config.highLightColor));return b},_getHighLightFillSymbol:function(){var b=y.fromJson({color:[255,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});b.outline.setColor(new m(this.config.highLightColor));
return b},_zoomToGraphics:function(b){if(this.map&&this.featureLayer&&this.featureLayer.visible&&b&&0<b.length){var e=null;try{var d=g.filter(b,function(b){return!!b.geometry});0<d.length&&(e=D.graphicsExtent(d))}catch(G){console.error(G)}if(e)this.map.setExtent(e.expand(1.4));else if(b=(b=b[0])&&b.geometry)e=a.hitch(this,function(b){var e=this.map.getNumLevels(),d=this.map.getLevel();this.map.setLevel(Math.max(d,Math.floor(2*e/3))).then(a.hitch(this,function(){this.map.centerAt(b)}))}),"point"===
b.type?e(b):"multipoint"===b.type&&1===b.points.length&&e(b.getPoint(0))}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_mouseOverChartItem:function(b){this._removeTempGraphics();if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var e=v.getTypeByGeometryType(this.featureLayer.geometryType),
d=null;if("point"===e)d=this._getHighLightMarkerSymbol(),this.tempGraphics=[],g.forEach(b,a.hitch(this,function(b){b=new w(b.geometry,d);this.tempGraphics.push(b);this.featureLayer.add(b)}));else if("polyline"===e||"polygon"===e)d="polyline"===e?this._getHighLightLineSymbol():this._getHighLightFillSymbol(),g.forEach(b,a.hitch(this,function(b){b.setSymbol(d)})),this.features.length!==b.length&&"polygon"===e&&(g.forEach(b,a.hitch(this,function(b){this.featureLayer.remove(b)})),g.forEach(b,a.hitch(this,
function(b){this.featureLayer.add(b)})))}},_mouseOutChartItem:function(){this._removeTempGraphics();this.featureLayer&&g.forEach(this.featureLayer.graphics,a.hitch(this,function(b){b.setSymbol(null)}))},_isNumber:function(b){return"[object number]"===Object.prototype.toString.call(b).toLowerCase()},_tryLocaleNumber:function(b,e){var d=b;if(C.isDefined(b)&&isFinite(b))try{var c;if(e&&this._isNumberField(e)){var f=this.popupFieldInfosObj[e];c=f&&a.exists("format.places",f)?v.localizeNumberByFieldInfo(b,
f):v.localizeNumber(b)}else c=b;"string"===typeof c&&(d=c)}catch(z){console.error(z)}return d+""},_getBestDisplayValue:function(b,e){var d=this._tryLocaleNumber(e,b);if(this.featureLayer.typeIdField===b){var c=this.featureLayer.types;if(c&&0<c.length&&(c=g.filter(c,a.hitch(this,function(b){return b.id===e})),0<c.length))return d=c[0].name}(c=this._getFieldInfo(b))&&c.domain&&(c=c.domain.codedValues)&&0<c.length&&g.some(c,function(b){return b.code===e?(d=b.name,!0):!1});return d},_getFieldAliasArray:function(b){return g.map(b,
a.hitch(this,function(b){return this._getFieldAlias(b)}))},_getFieldAlias:function(b){var a=b;(b=this._getFieldInfo(b))&&(a=b.alias||a);return a},_getFieldInfo:function(b){if(this.featureLayer)for(var a=this.featureLayer.fields,e=0;e<a.length;e++)if(a[e].name===b)return a[e];return null},_isNumberField:function(b){var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return g.some(this.featureLayer.fields,a.hitch(this,function(a){return a.name===b&&
0<=e.indexOf(a.type)}))},_isFloatNumberField:function(b){var e=["esriFieldTypeSingle","esriFieldTypeDouble"];return g.some(this.featureLayer.fields,a.hitch(this,function(a){return a.name===b&&0<=e.indexOf(a.type)}))},_isDateField:function(b){return(b=this._getFieldInfo(b))?"esriFieldTypeDate"===b.type:!1},_getBestDecimalPlace:function(b){var a=0,e={};g.forEach(b,function(b){b=b.toString().split(".");var a=null;1===b.length?a=0:2===b.length&&(a=b[1].length);null!==a&&(e[a]=void 0===e[a]?1:e[a]+1)});
b=null;for(var d in e){d=parseInt(d,10);var c=e[d];b?c>b.value&&(b={key:d,value:c}):b={key:d,value:c}}b&&(a=parseInt(b.key,10));return a},_getFloatNumberFieldDecimalPlace:function(b){var a=0;this.floatNumberFieldDecimalPlace&&(b=this.floatNumberFieldDecimalPlace[b],"number"===typeof b&&(a=b));return a},_getBestValueForFloatNumberField:function(b,a){var e=this._getFloatNumberFieldDecimalPlace(a),e=b.toFixed(e);return parseFloat(e)},_getColors:function(b,e){var d=[],c=a.clone(b);if(2===c.colors.length)d=
this._createGradientColors(c.colors[0],c.colors[c.colors.length-1],e);else{for(var f=Math.ceil(e/c.colors.length),p=0;p<f;p++)d=d.concat(c.colors);d=d.slice(0,e)}return d},_createGradientColors:function(b,a,e){var d=[];b=new m(b);var c=new m(a);a=(c.r-b.r)/e;for(var f=(c.g-b.g)/e,c=(c.b-b.b)/e,p=new m,k=0,r=0,g=0,h=0;h<e;h++)k=parseInt(b.r+a*h,10),r=parseInt(b.g+f*h,10),g=parseInt(b.b+c*h,10),p.setColor([k,r,g]),d.push(p.toHex());return d},_createParamsDijit:function(b,a){return new F({isInWidget:this.map?
!0:!1,type:b,config:a})},_createJimuChart:function(b,e,d,c,f){var p=f.type,k=this._createParamsDijit(p,f.display),m=k.getConfig();m&&a.mixin(f.display,m);var r=this._getBasicChartOptionsByStatisticsInfo(e,d,c,p);this._udpateJimuChartDisplayOptions(r,f);var h=new E({chartDom:b,config:r});h.placeAt(b);this._bindChartEvent(h,e,c);this.showSettingIcon&&this.own(n(k,"change",a.hitch(this,function(){k.showShelter();if(h){var b=k.getConfig();a.mixin(f.display,b);this._udpateJimuChartDisplayOptions(r,f);
h.setConfig(r)}k.hideShelter()})));return[h,k]},_udpateJimuChartDisplayOptions:function(b,e){var d=e.type,c=e.display,f={type:d,dataZoom:["inside","slider"],confine:!0,backgroundColor:c.backgroundColor,color:c.colors,legend:c.showLegend,theme:this.theme||"light",advanceOption:function(b){c.showLegend&&b.legend&&(b.legend.textStyle||(b.legend.textStyle={}),b.legend.textStyle.color=c.legendTextColor);"pie"===d?b.series&&0<b.series.length&&g.forEach(b.series,a.hitch(this,function(b){"pie"===b.type&&
(b.label||(b.label={}),b.label.normal||(b.label.normal={}),b.label.normal.show=c.showDataLabel,b.label.normal.textStyle||(b.label.normal.textStyle={}),b.label.normal.textStyle.color=c.dataLabelColor)})):(b.xAxis||(b.xAxis={}),b.xAxis.axisLabel||(b.xAxis.axisLabel={}),b.xAxis.axisLabel.textStyle||(b.xAxis.axisLabel.textStyle={}),b.xAxis.axisLabel.textStyle.color=c.horizontalAxisTextColor,b.yAxis||(b.yAxis={}),b.yAxis.axisLabel||(b.yAxis.axisLabel={}),b.yAxis.axisLabel.textStyle||(b.yAxis.axisLabel.textStyle=
{}),b.yAxis.axisLabel.textStyle.color=c.verticalAxisTextColor)}};"pie"===d&&(f.labelLine=!!c.showDataLabel);a.mixin(b,f);"pie"!==d&&(b.axisPointer=!1,b.scale=!1,b.hidexAxis=!c.showHorizontalAxis,b.hideyAxis=!c.showVerticalAxis);return b},_getBasicChartOptionsByStatisticsInfo:function(b,a,e,d){return"feature"===b||"category"===b?this._getCategoryModeChartOptionsByStatisticsInfo(a,e,d):"count"===b?this._getCountModeChartOptionsByStatisticsInfo(a,e,d):"field"===b?this._getFieldModeChartOptionByStatisticsInfo(a,
e,d):null},_bindChartEvent:function(b,e,d){if(this.map){var c=a.hitch(this,function(b){if("series"===b.componentType){var a=null;(a="field"===e?this.features:d[b.dataIndex].dataFeatures)&&("mouseover"===b.type?this._mouseOverChartItem(a):"mouseout"===b.type?this._mouseOutChartItem(a):"click"===b.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(a))}}),f=[{name:"mouseover",callback:c},{name:"mouseout",callback:c}];this.zoomToFeaturesWhenClick&&f.push({name:"click",callback:c});g.forEach(f,a.hitch(this,
function(a){b.chart.on(a.name,a.callback)}))}},_createFeatureModeCharts:function(b,e){var d=[],c=[],f=b.config,p={layerDefinition:this.featureLayer,features:b.features,labelField:f.labelField,valueFields:f.valueFields,sortOrder:f.sortOrder},k=x.getFeatureModeStatisticsInfo(p);g.forEach(f.types,a.hitch(this,function(b,a){try{var f=this._createJimuChart(e[a],"feature",p,k,b);d.push(f[0]);c.push(f[1])}catch(u){console.error(u)}}));return{charts:d,paramsDijits:c}},_createCategoryModeCharts:function(b,
e){var d=[],c=[],f=b.config,p={layerDefinition:this.featureLayer,features:b.features,categoryField:f.categoryField,valueFields:f.valueFields,operation:b.config.operation,sortOrder:f.sortOrder},k=x.getCategoryModeStatisticsInfo(p);g.forEach(f.types,a.hitch(this,function(b,a){try{var f=this._createJimuChart(e[a],"category",p,k,b);d.push(f[0]);c.push(f[1])}catch(u){console.error(u)}}));return{charts:d,paramsDijits:c}},_getCategoryModeChartOptionsByStatisticsInfo:function(b,e,d){var c={type:d,labels:[],
series:[]},f=this._getFieldAliasArray(b.valueFields),p=b.labelField||b.categoryField;c.series=g.map(f,a.hitch(this,function(b){return{name:b,type:d,data:[]}}));g.forEach(e,a.hitch(this,function(b){var a=this._getBestDisplayValue(p,b.category);c.labels.push(a);for(a=0;a<b.valueFields.length;a++)c.series[a].data.push(b.valueFields[a])}));return c},_createCountModeCharts:function(b,e){var d=[],c=[],f=b.config,p={layerDefinition:this.featureLayer,features:b.features,categoryField:f.categoryField,sortOrder:f.sortOrder},
k=x.getCountModeStatisticsInfo(p);g.forEach(f.types,a.hitch(this,function(b,a){try{var f=this._createJimuChart(e[a],"count",p,k,b);d.push(f[0]);c.push(f[1])}catch(u){console.error(u)}}));return{charts:d,paramsDijits:c}},_getCountModeChartOptionsByStatisticsInfo:function(b,e,d){var c={type:d,labels:[],series:[{name:this._legendNls||"Legend",type:d,data:[]}]},f=b.categoryField;g.forEach(e,a.hitch(this,function(b){var a=b.count;b=this._getBestDisplayValue(f,b.fieldValue);c.labels.push(b);c.series[0].data.push(a)}));
return c},_createFieldModeCharts:function(b,e){var d=[],c=[],f=b.config,p={layerDefinition:this.featureLayer,features:b.features,valueFields:f.valueFields,operation:f.operation},k=x.getFieldModeStatisticsInfo(p);g.forEach(f.types,a.hitch(this,function(b,a){try{var f=this._createJimuChart(e[a],"field",p,k,b);d.push(f[0]);c.push(f[1])}catch(u){console.error(u)}}));return{charts:d,paramsDijits:c}},_getFieldModeChartOptionByStatisticsInfo:function(b,e,d){var c={type:d,labels:[],series:[{name:this._legendNls||
"Legend",type:d,data:[]}]};b=b.valueFields;var f=this._getFieldAliasArray(b);g.forEach(b,a.hitch(this,function(b,a){var d=e[b];c.labels.push(f[a]);c.series[0].data.push(d)}));return c}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","jimu/utils","esri/lang"],function(n,h,l,c,a){var g=n(null,{popupFieldInfosObj:null,constructor:function(a){a&&l.mixin(this,a);this.popupFieldInfosObj={};this.floatNumberFieldDecimalPlace={}},_isNumber:function(a){return"[object number]"===
Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(d,k){var m=d;if(a.isDefined(d)&&isFinite(d))try{var h;if(k&&this._isNumberField(k)){var f=this.popupFieldInfosObj[k];h=f&&l.exists("format.places",f)?c.localizeNumberByFieldInfo(d,f):c.localizeNumber(d)}else h=d;"string"===typeof h&&(m=h)}catch(b){console.error(b)}return m+""},_getBestDisplayValue:function(a,c){var d=this._tryLocaleNumber(c,a);if(this.layerDefinition.typeIdField===a){var k=this.layerDefinition.types;if(k&&
0<k.length&&(k=h.filter(k,l.hitch(this,function(a){return a.id===c})),0<k.length))return d=k[0].name}(k=this._getFieldInfo(a))&&k.domain&&(k=k.domain.codedValues)&&0<k.length&&h.some(k,function(a){return a.code===c?(d=a.name,!0):!1});return d},_getFieldAliasArray:function(a){return h.map(a,l.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(a){var c=a;(a=this._getFieldInfo(a))&&(c=a.alias||c);return c},_getFieldInfo:function(a){if(this.layerDefinition)for(var c=this.layerDefinition.fields,
d=0;d<c.length;d++)if(c[d].name===a)return c[d];return null},_isNumberField:function(a){var c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return h.some(this.layerDefinition.fields,l.hitch(this,function(d){return d.name===a&&0<=c.indexOf(d.type)}))},_isFloatNumberField:function(a){var c=["esriFieldTypeSingle","esriFieldTypeDouble"];return h.some(this.layerDefinition.fields,l.hitch(this,function(d){return d.name===a&&0<=c.indexOf(d.type)}))},_isDateField:function(a){return(a=
this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var c=0,d={};h.forEach(a,function(b){b=b.toString().split(".");var a=null;1===b.length?a=0:2===b.length&&(a=b[1].length);null!==a&&(d[a]=void 0===d[a]?1:d[a]+1)});a=null;for(var g in d){g=parseInt(g,10);var f=d[g];a?f>a.value&&(a={key:g,value:f}):a={key:g,value:f}}a&&(c=parseInt(a.key,10));return c},_getFloatNumberFieldDecimalPlace:function(a){var c=0;this.floatNumberFieldDecimalPlace&&(a=this.floatNumberFieldDecimalPlace[a],
"number"===typeof a&&(c=a));return c},_getBestValueForFloatNumberField:function(a,c){var d=this._getFloatNumberFieldDecimalPlace(c),d=a.toFixed(d);return parseFloat(d)},getFeatureModeStatisticsInfo:function(a){var d=a.labelField,m=a.valueFields,g="des"!==a.sortOrder,f=[],f=h.map(a.features,l.hitch(this,function(b){var a=b.attributes;b={category:a[d],valueFields:[],dataFeatures:[b]};b.valueFields=h.map(m,l.hitch(this,function(b){return a[b]}));return b}));g?f.sort(function(b,a){return b.category<a.category?
-1:b.category>a.category?1:0}):f.sort(function(b,a){return b.category<a.category?1:b.category>a.category?-1:0});this._isDateField(d)&&0<f.length&&h.map(f,l.hitch(this,function(b){var a=b.category;"number"===typeof a&&0<a&&(b.category=c.localizeDate(new Date(a)))}));return f},getCategoryModeStatisticsInfo:function(d){var k=d.categoryField,g=d.valueFields,q=d.operation,f="des"!==d.sortOrder,b=[],e={};h.forEach(d.features,l.hitch(this,function(b){var a=b.attributes[k],c=null;e.hasOwnProperty(a)?(c=e[a],
c.dataFeatures.push(b)):(c={dataFeatures:[b]},e[a]=c)}));var p=null,r;for(r in e)p=e[r],this._isNumberField(k)&&a.isDefined(r)&&(r=parseFloat(r)),p.valueFields=h.map(g,l.hitch(this,function(b){var a=h.map(p.dataFeatures,l.hitch(this,function(a){return a.attributes[b]})),c=0;"max"===q?c=-Infinity:"min"===q&&(c=Infinity);var e=0;h.forEach(a,l.hitch(this,function(b){this._isNumber(b)&&(e++,"average"===q||"sum"===q?c+=b:"max"===q?c=Math.max(c,b):"min"===q&&(c=Math.min(c,b)))}));0<e?"average"===q&&(c/=
e):c=0;return c})),b.push({category:r,valueFields:p.valueFields,dataFeatures:p.dataFeatures});f?b.sort(function(b,a){return b.category<a.category?-1:b.category>a.category?1:0}):b.sort(function(b,a){return b.category<a.category?1:b.category>a.category?-1:0});this._isDateField(k)&&0<b.length&&h.map(b,l.hitch(this,function(b){var a=b.category;a&&0<parseInt(a,10)&&(b.category=c.localizeDate(new Date))}));b=h.filter(b,l.hitch(this,function(b){var a=!1;b=b.category;"number"===typeof b&&(a=isNaN(b));return!a}));
"sum"!==q&&"average"!==q||h.forEach(b,l.hitch(this,function(b){h.forEach(g,l.hitch(this,function(a,c){if(this._isFloatNumberField(a)){var e=b.valueFields[c],e=this._getBestValueForFloatNumberField(e,a);b.valueFields[c]=e}}))}));return b},getCountModeStatisticsInfo:function(a){var d=a.categoryField,g="des"!==a.sortOrder,q={};h.forEach(a.features,l.hitch(this,function(b){var a=b.attributes[d],c=null;q.hasOwnProperty(a)?(c=q[a],c.count++,c.dataFeatures.push(b)):(c={count:1,dataFeatures:[b]},q[a]=c)}));
a=[];var f=null,b;for(b in q)f=q[b],this._isNumberField(d)&&(b=parseFloat(b)),a.push({fieldValue:b,count:f.count,dataFeatures:f.dataFeatures});g?a.sort(function(b,a){return b.fieldValue<a.fieldValue?-1:b.fieldValue>a.fieldValue?1:0}):a.sort(function(b,a){return b.fieldValue<a.fieldValue?1:b.fieldValue>a.fieldValue?-1:0});this._isDateField(d)&&0<a.length&&h.forEach(a,l.hitch(this,function(b){if(b.fieldValue){var a=parseInt(b.fieldValue,10);0<a&&(b.fieldValue=c.localizeDate(new Date(a)))}}));return a},
getFieldModeStatisticsInfo:function(a){var c=a.valueFields,d=a.operation,g=h.map(a.features,l.hitch(this,function(b){return b.attributes})),f={};h.forEach(c,l.hitch(this,function(b){f[b]=0;"max"===d?f[b]=-Infinity:"min"===d&&(f[b]=Infinity);var a=0;h.forEach(g,l.hitch(this,function(c){c=c[b];this._isNumber(c)&&(a++,f.hasOwnProperty(b)?"average"===d||"sum"===d?f[b]+=c:"max"===d?f[b]=Math.max(f[b],c):"min"===d&&(f[b]=Math.min(f[b],c)):f[b]=c)}));0<a?"average"===d&&(f[b]/=a):f[b]=0}));"sum"!==d&&"average"!==
d||h.forEach(c,l.hitch(this,function(b){f.hasOwnProperty(b)&&this._isFloatNumberField(b)&&(f[b]=this._getBestValueForFloatNumberField(f[b],b))}));return f}});return{getFeatureModeStatisticsInfo:function(a){return(new g({layerDefinition:a.layerDefinition})).getFeatureModeStatisticsInfo(a)},getCategoryModeStatisticsInfo:function(a){return(new g({layerDefinition:a.layerDefinition})).getCategoryModeStatisticsInfo(a)},getCountModeStatisticsInfo:function(a){return(new g({layerDefinition:a.layerDefinition})).getCountModeStatisticsInfo(a)},
getFieldModeStatisticsInfo:function(a){return(new g({layerDefinition:a.layerDefinition})).getFieldModeStatisticsInfo(a)}}})},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/Evented esri/lang libs/echarts/echarts jimu/utils ./_Gauge dojo/_base/config libs/echarts/light libs/echarts/dark".split(" "),function(n,h,l,c,a,g,d,k,m,q,f){return n([h,g],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",
config:null,validConfig:{type:"column bar line pie radar funnel gauge".split(" "),common:"type title labels legend confine toolbox color theme backgroundColor scale dataZoom events series advanceOption".split(" "),axisChart:["stack","axisPointer","hidexAxis","hideyAxis"],pie:["innerRadius","labelLine"],funnel:["min","max","funnelSort"],gauge:["shape","min","max","gaugeOption"],radar:["radarShape","indicator"]},defaultConfiguration:{series:{pieSeries:[{type:"pie",radius:[0,"70%"],labelLine:{normal:{show:!0,
length:5,length2:5}},data:[]}],funnelSeries:[{type:"funnel",minSize:"0%",maxSize:"100%",sort:"descending",data:[]}]},toolboxs:{dataView:{title:"Data view",readOnly:!1},magicType:{title:{line:"switch to line",bar:"switch to bar",stack:"switch to stack",tiled:"switch to tiled"},type:["line","bar","stack","tiled"]},restore:{title:"restore"},saveAsImage:{title:"save as image"}}},postCreate:function(){this.inherited(arguments);if(this.chartDom){var b=a.getMarginBox(this.chartDom);0===b.w&&(b.w=10);0===
b.h&&(b.h=10);c.set(this.domNode,{width:b.w+"px",height:b.h+"px"})}else console.warn("No valid chart dom!"),c.set(this.domNode,{width:"10px",height:"10px"});this.gauge=new q;this.chart=k.init(this.domNode,this.config.theme||"light");this.gauge.setChart(this.chart);this.gauge.setRTL(this._isRTL());this.setConfig()},updateConfig:function(b){return m.isNotEmptyObject(b)?(l.mixin(this.config,b),this.setConfig()):!1},setConfig:function(b){m.isNotEmptyObject(b)?this.config=b:this.config=this.config||{};
if(!this._checkConfig(this.config))return!1;this._customTheme();this.clear();this.chart.setOption(this._chartFactory(this.config),!0);this._resize();return!0},_chartFactory:function(b){b=l.clone(b);var a=l.clone(this.defaultConfiguration),c=this.option={},c=this._settingDefaultGrid(c,b),c=this._settingRenderOption(c,b),c=this._settingTitle(c,b),c=this._settingBackgroundColor(c,b),c=this._settingColor(c,b),c=this._settingToolTip(c,b);this._isAxisChart(b)?(c=this._settingAxisChartAxis(c,b),c=this._settingToolBox(c,
b,a),c=this._settingSeries(c,b),c=this._settingStack(c,b),c=this._settingAxisDisplay(c,b)):this._isNoAxisChart(b)&&(c=this._settingToolBox(c,b,a,"magicType"),c=this._settingNoAxisCharts(c,b,a));c=this._settingLegend(c,b);c=this._settingScale(c,b);c=this._handleChartRtl(c,b);c=this._avoidTitleToolBoxOverlap(c,b);c=this._pieChartAvoidLegendLabelOverLap(c,b);c=this._settingAdvanceOption(c,b);c=this._avoidAdjoiningColorSameForPie(c,b);this._bindEvents(b);return c},_avoidAdjoiningColorSameForPie:function(b,
a){if("pie"!==a.type||!b.color||2>=b.color.length)return b;m.isNotEmptyObject(b.series,!0)&&b.series.forEach(l.hitch(this,function(a){var c=a.data.length;0===(c-1)%b.color.length&&(a=a.data[c-1],a.itemStyle||(a.itemStyle={}),a.itemStyle.normal||(a.itemStyle.normal={}),a.itemStyle.normal.color||(a.itemStyle.normal.color=b.color[1]))}));return b},_pieChartAvoidLegendLabelOverLap:function(b,a){if("pie"!==a.type)return b;var c=a.labelLine?.75:.85,e=this.chart.getHeight(),e=parseInt(e/2,10);a.legend&&
(c-=.12,b.series[0].center=["50%",e-20]);b.series[0].radius[1]=100*c+"%";return b},_settingDefaultGrid:function(b,a){this._isAxisChart(a)&&(b.grid={top:20,bottom:10,left:10,right:10,containLabel:!0});return b},_settingRenderOption:function(b){b.hoverLayerThreshold=1E3;b.progressiveThreshold=1E3;b.progressive=100;b.animationThreshold=1E3;return b},clear:function(){this.chart.clear()},resize:function(b,a){c.set(this.domNode,{width:b||"100%",height:a||"100%"});b?"string"===typeof b&&(b=Number(b.replace("px",
""))):b=this.domNode.clientWidth;this.chart.resize();this._resize(b)},_resize:function(b){this.chart.setOption(this._settingFixedPosition(b));this.config.shape&&"curved"!==this.config.shape&&(this.gauge._resetGrid(this.config),this.gauge._resetGraphic(this.config))},_settingFixedPosition:function(b){var a=this.config,c=this.option;this._isAxisChart(a)&&(c=this._settingDataZoom(c,a,b),c=this._settingGrid(c,a));"pie"===a.type&&(c=this._pieChartAvoidLegendLabelOverLap(c,a));return c},destroy:function(){this.chart.clear();
m.isNotEmptyObject(this.config.events)&&this.config.events.forEach(l.hitch(this,function(b){this.chart.off(b.name)}));this.inherited(arguments)},_settingAxisDisplay:function(b,a){if(!this._isAxisChart(a))return b;b.xAxis.show=!a.hidexAxis;b.yAxis.show=!a.hideyAxis;b.grid.containLabel=!a.hideyAxis;return b},_handleChartRtl:function(b,a){if(!this._isRTL())return b;if(this._isAxisChart(a)||"vertical"===a.shape||"horizontal"===a.shape)b.xAxis.inverse=!0,b.yAxis.position="right";return b},_settingTitle:function(b,
a){a.title&&(b.title={textStyle:{fontSize:16}},b.title.text=a.title);return b},_settingColor:function(b,a){m.isNotEmptyObject(a.color)&&(b.color=a.color);return b},_settingBackgroundColor:function(b,a){a.backgroundColor&&(b.backgroundColor=a.backgroundColor);return b},_settingToolTip:function(b,a){b.tooltip={};if(a.axisPointer){if(b.tooltip.trigger="axis","column"===a.type||"bar"===a.type)b.tooltip.axisPointer={type:"shadow"}}else b.tooltip.axisPointer={type:""};return b},_settingAxisChartAxis:function(b,
a){b.xAxis={};b.yAxis={};"column"===a.type||"line"===a.type&&a.labels?(b.xAxis.data=a.labels,b.xAxis.type="category"):"bar"===a.type&&a.labels&&(b.yAxis.data=a.labels,b.yAxis.type="category");return b},_settingToolBox:function(b,a,c,d){b.toolbox={};d||(d="");m.isNotEmptyObject(a.toolbox)&&(b.toolbox.feature={},a.toolbox.forEach(function(e){e!==d&&(a.stack&&(c.toolboxs.magicType.type=["line","bar","stack","tiled"]),b.toolbox.feature[e]=c.toolboxs[e])}));return b=this._handleToolBoxRTL(b,a)},_settingSeries:function(b,
a){if(m.isNotEmptyObject(a.series))m.isNotEmptyObject(b.series)||(b.series=a.series);else return console.log("No series!"),b;a.series.forEach(l.hitch(this,function(c,d){var e="",e=c.type?c.type:a.type;c.data=c.data.map(l.hitch(this,function(b,c){if(this._isNoAxisChart(a)){var d={};d.value=b;d.name=a.labels[c]||"";return d}return b}));b.series[d].name=c.name||"";b.series[d].type="column"===e?"bar":e;b.series[d].data=c.data}));return b},_settingNoAxisCharts:function(b,a,c){if("pie"===a.type)b=this._settingPie(b,
a,c);else if("funnel"===a.type)b=this._settingFunnel(b,a,c);else if("radar"===a.type)b=this._settingRadar(b,a);else if("gauge"===a.type)return this.gauge._settingGaugeSeries(b,a);return this._settingSeries(b,a)},_settingScale:function(b,a){if(!a.scale)return b;"bar"===a.type?b.xAxis.scale=!0:"line"===a.type||"column"===a.type?b.yAxis.scale=!0:"radar"===a.type&&(b.radar.scale=!0);return b},_settingAdvanceOption:function(b,a){a.advanceOption&&("object"===typeof a.advanceOption?l.mixin(b,a.advanceOption):
"function"===typeof a.advanceOption&&a.advanceOption(b));return b},_bindEvents:function(b){m.isNotEmptyObject(b.events)&&b.events.forEach(l.hitch(this,function(b){this.chart.on(b.name,b.callback)}))},_settingLegend:function(b,a){if(!a.legend)return b;b.legend={orient:"horizontal",x:"left",height:20,y:"bottom",data:[]};this._isAxisChart(a)||"gauge"===a.type?b.series.forEach(function(a){b.legend.data.push(a.name)}):"pie"!==a.type&&"funnel"!==a.type&&"radar"!==a.type||b.series[0].data.forEach(function(a){b.legend.data.push(a.name)});
return b=this._handleLegendRTL(b,a)},_handleDataZoomStyle:function(b,a){a.showDataShadow=!1;a.realtime=!1;a.bottom=b.legend?30:"auto";return a},_showDataZoom:function(b,a,c){c=c||this.chart.getWidth();var d=a.series[0].data.length*a.series.length,e=this._isRTL(),f=this._getaxisZeroPosition(a);c="bar"!==a.type?e?f.left:c-f.left-b.grid.right:f.top;this.showDataZoom=8>c/d;var k=c/(8*d),k=parseInt(100*k,10),k=100<k?100:k;c=[];var g="bar"===a.type?"xAxis":"yAxis",h="bar"===a.type?"yAxisIndex":"xAxisIndex",
m="bar"===a.type?"width":"height";b=this._initAxisOfDataZoom(b,g);c=a.dataZoom.map(l.hitch(this,function(b){b={type:b,start:0,show:this.showDataZoom};b[h]=[0];b[m]=15;b.end=k;"xAxis"===g&&this._isRTL()&&(b.left="10");return b=this._handleDataZoomStyle(a,b)}));b.dataZoom=c;return b},_settingDataZoom:function(b,a,c){if(!m.isNotEmptyObject(a.dataZoom))return{dataZoom:[]};a.dataZoom?b=this._showDataZoom(b,a,c):(this.showDataZoom=!1,b.dataZoom=[]);return b},_avoidTitleToolBoxOverlap:function(b,a){if("gauge"===
a.type)return b;var c=10;a.title&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&a.title&&(b.toolbox.top=20);this._isAxisChart(a)&&b.grid&&(b.grid.top=c);return b},_settingGrid:function(b,a){if(!this._isAxisChart(a))return b;var c=10;a.title&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&a.title&&(b.toolbox.top=20);b.grid&&(b.grid.top=c);var c=10,d=43;a.hideyAxis&&(c=20,d=63);var e=this._isRTL(),f=0,k=10;a.legend&&(f=10,k+=
20);"bar"===a.type?(e?b.grid.left=this.showDataZoom?30:10:b.grid.right=this.showDataZoom?30:10,b.grid.bottom=k):b.grid.bottom=this.showDataZoom?d+f:c+f;return b},_handleLegendRTL:function(b,a){if(!a.legend)return b;var c={};this._isRTL()?c.x="right":c.x="left";b.legend=l.mixin(b.legend,c);return b},_handleToolBoxRTL:function(b,a){if(!a.toolbox)return b;var c={top:0};this._isRTL()?c.right=0:c.left=0;b.toolbox=l.mixin(b.toolbox,c);return b},_initAxisOfDataZoom:function(b,a){b[a].type="value";b.xAxis.splitLine=
{show:!0,lineStyle:{type:"dashed"}};b.yAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};return b},_isRTL:function(){return"ar"===f.locale||"he"===f.locale},_settingStack:function(b,a){if(!this._isAxisChart(a))return b;b.series=b.series.map(function(b){a.stack&&(b.stack="stack","line"===a.type&&(b.areaStyle={normal:{}},b.smooth=!0));return b});return b},_settingPie:function(b,a,c){if("pie"!==a.type)return b;b.series=c.series.pieSeries;a.innerRadius&&(b.series[0].radius[0]=a.innerRadius);b.series[0].labelLine.normal.show=
"undefined"===typeof a.labelLine?!0:a.labelLine;return b},_settingFunnel:function(b,a,c){if("funnel"!==a.type)return b;b.series=c.series.funnelSeries;m.isNotEmptyObject(a.funnel)&&(b.series[0].min=a.min||0,b.series[0].max=a.max||100,b.series[0].sort=a.funnelSort||"descending");return b},_settingRadar:function(b,a){var c=this;if("radar"!==a.type)return b;b.radar={nameGap:6,radius:"70%"};a.radarShape&&(b.radar.shape=a.radarShape);a.indicator?b.radar.indicator=a.indicator:console.error("No radar indicator");
b.series=[{}];b.series[0].label={normal:{show:!0,formatter:function(b){return c._tryLocaleNumber(b.value)}}};var d=[];a.series[0].data.forEach(function(b,c){d[c]={tooltip:"\x3cspan\x3e"+a.labels[c]+"\x3c/span\x3e"};b.forEach(function(b,f){d[c].tooltip+="\x3cbr/\x3e\x3cspan\x3e"+a.indicator[f].name+"\x3c/span\x3e : \x3cspan\x3e"+b+"\x3c/span\x3e"})});b.tooltip={trigger:"item",formatter:function(b){return'\x3cspan class\x3d"colorEl marginRight5" style\x3d"background-color:'+m.encodeHTML(b.color)+'"\x3e\x3c/span\x3e'+
d[b.dataIndex].tooltip}};this.config.confine&&(b.tooltipconfine=!0);return b},_customTheme:function(){var b=this;m.isNotEmptyObject(this.chart._theme)||(this.chart._theme={});m.isNotEmptyObject(this.config.color)&&(this.chart._theme.color=this.config.color);m.isNotEmptyObject(this.chart._theme.tooltip)||(this.chart._theme.tooltip={});this.config.confine&&(this.chart._theme.tooltip.confine=!0);this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===
typeof a.value?(a=parseFloat(a.value).toFixed(2),b._tryLocaleNumber(a)):a.value}},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}};this.chart._theme.tooltip.formatter=function(b){function a(b){var a='\x3cdiv class\x3d"tooltip-tr"\x3e',d='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+m.encodeHTML(b.color)+'"\x3e\x3c/div\x3e',a=a+d;b.name&&"%00-"!==encodeURI(b.name)&&(a+="\x3cdiv\x3e"+b.name+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");
a+="\x3cdiv\x3e"+c._tryLocaleNumber(b.value)+"\x3c/div\x3e";"pie"===b.seriesType&&(a+="\x3cdiv\x3e("+b.percent+"%)\x3c/div\x3e");return a+"\x3c/div\x3e"}var c=this;return function(b){var c='\x3cdiv class\x3d"tooltip-div"\x3e';Array.isArray(b)?("%00-"!==encodeURI(b[0].seriesName)&&(c+='\x3cdiv class\x3d"tr"\x3e'+b[0].seriesName+"\x3c/div\x3e"),b.forEach(function(b){c+=a(b)})):("%00-"!==encodeURI(b.seriesName)&&(c+='\x3cdiv class\x3d"tr"\x3e'+b.seriesName+"\x3c/div\x3e"),c+=a(b));return c+="\x3c/div\x3e"}(b)}.bind(this);
m.isNotEmptyObject(this.chart._theme.valueAxis)||(this.chart._theme.valueAxis={});m.isNotEmptyObject(this.chart._theme.valueAxis.axisLabel)||(this.chart._theme.valueAxis.axisLabel={});this.chart._theme.valueAxis.axisLabel.formatter=function(b){return m.localizeNumber(b)}},_checkConfig:function(b){var a=!0;m.isNotEmptyObject(b)||(console.error("Empty config"),a=!1);if(!b.type||0>this.validConfig.type.indexOf(b.type))console.error("Invaild chart type!"),a=!1;var c=l.clone(this.validConfig),d=c.common,
f=[],f="column"===b.type||"bar"===b.type||"line"===b.type?d.concat(c.axisChart):d.concat(c[b.type]);Object.keys(b).forEach(function(b){0>f.indexOf(b)&&(a=!1,console.error("Invalid configuration parameter: "+b))});return a},_tryLocaleNumber:function(b){var a=b;if(d.isDefined(b)&&isFinite(b))try{var c=m.localizeNumber(b);"string"===typeof c&&(a=c)}catch(r){console.error(r)}return a+""},_getaxisZeroPosition:function(b){if(!this.chart)return!1;var a={},c=0,d=0;if((m.isNotEmptyObject(b.dataZoom,!0)||b.scale)&&
b.series&&b.series[0]&&b.series[0].data){var f=b.series[0].data;m.isNotEmptyObject(f,!0)&&("bar"!==b.type?d=m.getMinOfArray(f):c=m.getMinOfArray(f))}if(b=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[c,d]))c=b[1]-5,a.left=b[0]-5,a.top=c;return m.isNotEmptyObject(a)?a:!1},_isAxisChart:function(b){return"column"===b.type||"bar"===b.type||"line"===b.type},_isNoAxisChart:function(b){return"pie"===b.type||"funnel"===b.type||"radar"===b.type||"gauge"===b.type}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare",
"dojo/_base/lang","jimu/utils"],function(n,h,l){return n([],{curvedGaugeSeries:[{type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{normal:{}},detail:{offsetCenter:[0,"60%"],textStyle:{color:"24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500,animationDelayUpdate:100}],
horizontalGauge:{grid:{top:"middle",height:90},xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",
barWidth:30,label:{normal:{show:!0,position:"top",offset:[20,0],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},z:10}]},verticalGauge:{grid:{left:"middle",width:60},yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",
fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},
z:10}]},setChart:function(c){this.chart=c},setRTL:function(c){this._isRTL=c},_settingValueStyle:function(c,a){if(a.gaugeOption&&l.isNotEmptyObject(a.gaugeOption.valueStyle)){var g=a.gaugeOption.valueStyle,d=g.textStyle,g=g.formatter;"horizontal"===a.shape||"vertical"===a.shape?(h.mixin(c.series[1].data[0].label.normal.textStyle,d),g&&(c.series[1].data[0].label.normal.formatter=g)):"curved"===a.shape&&(h.mixin(c.series[0].detail.textStyle,d),g&&(c.series[0].detail.formatter=g))}return c},_settingLabelColor:function(c,
a){var g="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(g=a.gaugeOption.labelColor);"curved"===a.shape?c.series[0].axisLabel.textStyle.color=g:"horizontal"===a.shape?c.xAxis.axisLabel.textStyle.color=g:"vertical"===a.shape&&(c.yAxis.axisLabel.textStyle.color=g);return c},_settingHorizontalGauge:function(c,a){h.mixin(c,h.clone(this.horizontalGauge));c.grid={top:"middle",height:90,left:"10%",right:"10%"};a.min="undefined"!==typeof a.min&&a.min?a.min:0;a.max="undefined"!==typeof a.max&&a.max?a.max:
100;c.xAxis.max=a.max;c.xAxis.min=a.min;c.xAxis.scale=!0;c.series[0].data[0]=a.max;c=this._handleValue(c,a);a.labels&&a.labels[0]&&(c.series[1].data[0].name=a.labels[0]);c.series[1].name=a.series[0].name;c=this._settingNoCurvedGaugeColor(c,a);return c=this._handleHorizontalGaugeValueRTL(c,a)},_handleHorizontalGaugeValueRTL:function(c,a){if(!this._isRTL||"horizontal"!==a.shape)return c;c.series[1].label.normal.offset=[-20,0];return c},_settingVerticalGauge:function(c,a){h.mixin(c,h.clone(this.verticalGauge));
c.grid={left:"middle",width:60,top:"10%",bottom:"10%"};c.grid.left=this._getGridLeftOfVerticalGauge();a.min="undefined"!==typeof a.min&&a.min?a.min:0;a.max="undefined"!==typeof a.max&&a.max?a.max:100;c.yAxis.max=a.max;c.yAxis.min=a.min;c.series[0].data[0]=a.max;c=this._handleValue(c,a);a.labels&&a.labels[0]&&(c.series[1].data[0].name=a.labels[0]);c.series[1].name=a.series[0].name;c=this._settingNoCurvedGaugeColor(c,a);return c=this._handleVerticalGaugeValueRTL(c,a)},_handleVerticalGaugeValueRTL:function(c,
a){if(!this._isRTL||"vertical"!==a.shape)return c;var g=(a.series[0].data[0]+"").length-1;a.gaugeOption&&a.gaugeOption.valueStyle&&"undefined"!==typeof a.gaugeOption.valueStyle.decimalPlaces&&(g+=a.gaugeOption.valueStyle.decimalPlaces);c.series[1].label.normal.offset=[-17-9*g,-15];return c},_handleValue:function(c,a){var g;a.series[0].data[0]<=a.max?g=a.series[0].data[0]:(g=a.max,c.series[1].data[0].label.normal.formatter=function(){return a.series[0].data[0]},c.tooltip.formatter=function(c){return'\x3cspan class\x3d"colorEl marginRight5" style\x3d"background-color:'+
l.encodeHTML(c.color)+'"\x3e\x3c/span\x3e'+a.series[0].data[0]});c.series[1].data[0].value=g;return c},_settingCurvedGauge:function(c,a){c.series=h.clone(this.curvedGaugeSeries);a.min="undefined"!==typeof a.min&&a.min?a.min:0;a.max="undefined"!==typeof a.max&&a.max?a.max:100;c.series[0].min=a.min;c.series[0].max=a.max;c.series[0].axisLine.lineStyle.color[0][0]=parseFloat(a.series[0].data[0]/a.max).toFixed(2);c.series[0].data[0].value=a.series[0].data[0];a.labels&&a.labels[0]&&(c.series[0].data[0].name=
a.labels[0]);a.series[0].name&&(c.series[0].name=a.series[0].name);c.series[0].axisLine.lineStyle.width=30;return c=this._settingCurvedGaugeColor(c,a)},_settingGaugeSeries:function(c,a){if("gauge"!==a.type)return c;"horizontal"===a.shape?c=this._settingHorizontalGauge(c,a):"vertical"===a.shape?c=this._settingVerticalGauge(c,a):"curved"===a.shape&&(c=this._settingCurvedGauge(c,a));c=this._settingGaugeLabel(c,a);c=this._settingLabelColor(c,a);return c=this._settingValueStyle(c,a)},_resetGraphic:function(c){c=
this._settingGraphic(c);l.isNotEmptyObject(c,!0)&&this.chart.setOption({graphic:c})},_resetGrid:function(c){c=this._settingGridLeftOfVerticalGauge(c);l.isNotEmptyObject(c)&&this.chart.setOption({grid:c})},_settingGridLeftOfVerticalGauge:function(c){return"gauge"!==c.type||"vertical"!==c.shape?{}:{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_settingCurvedGaugeColor:function(c,a){a.gaugeOption&&(a.gaugeOption.bgColor&&(c.series[0].axisLine.lineStyle.color[1][1]=a.gaugeOption.bgColor),
a.gaugeOption.columnColor&&(c.series[0].axisLine.lineStyle.color[0][1]=a.gaugeOption.columnColor));return c},_settingNoCurvedGaugeColor:function(c,a){a.gaugeOption&&(a.gaugeOption.bgColor&&(c.series[0].itemStyle.normal.color=a.gaugeOption.bgColor),a.gaugeOption.columnColor&&(c.series[1].data[0].itemStyle.normal.color=a.gaugeOption.columnColor));return c},_settingGraphic:function(c){var a=[];"gauge"===c.type&&c.gaugeOption&&("horizontal"===c.shape?a=this._settingHorizontalGraphic(c):"vertical"===c.shape&&
(a=this._settingVerticalGraphic(c)));return a},_settingHorizontalGraphic:function(c){var a="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(a=c.gaugeOption.labelColor);var g=[],d=this.chart.convertToPixel({yAxisIndex:0},0),d=parseInt(d,10),d=Number(d)+16;this.cacheCriticalValues=h.clone(this.criticalValues);this.criticalValues.forEach(h.hitch(this,function(k){var h,q;"object"===typeof k?k.type&&(h=k.type,q=k.value):q=k;k=c.min||0;if(!(q>(c.max||100)||q<k)){k=this._getxAxisValueLeft(q);var f=6*(q.toString().length-
2),b=k;0<f&&(b=k-f);h||g.push({z:10,type:"image",left:k,style:{image:require.toUrl("jimu")+"/css/images/chart/top_indicator.svg",width:10,height:10},silent:!0,top:d});g.push({z:10,type:"text",left:b,style:{text:q,fill:a,font:"normal 11px sans-serif"},silent:!0,top:d+11})}}));return g},_settingVerticalGraphic:function(c){var a="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(a=c.gaugeOption.labelColor);var g=[],d=this.chart.convertToPixel({xAxisIndex:0},0),d=parseFloat(d,10).toFixed(2),d=Number(d),
k=require.toUrl("jimu")+"/css/images/chart/left_indicator.svg";this._isRTL&&(d+=40,k=require.toUrl("jimu")+"/css/images/chart/left_indicator_rtl.svg");var m=d-26;this.cacheCriticalValues=h.clone(this.criticalValues);this.criticalValues.forEach(h.hitch(this,function(d){var f,b;"object"===typeof d?d.type&&(f=d.type,b=d.value):b=d;d=m;d=this._isRTL?m+11:m-11-6*(b.toString().length-1);var e=c.min||0;b>(c.max||100)||b<e||(e=this._getyAxisValueTop(b),e-=2,f||g.push({z:10,type:"image",left:m,style:{image:k,
width:10,height:10},silent:!0,top:e}),g.push({z:10,type:"text",left:d,style:{text:b,fill:a,font:"normal 11px sans-serif"},silent:!0,top:e-2}))}));return g},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(c){c=this.chart.convertToPixel({xAxisIndex:0},c);return parseFloat(c,10)-4},_getyAxisValueTop:function(c){c=this.chart.convertToPixel({yAxisIndex:0},c);return parseFloat(c,10)},_showSpecialLabel:function(c,a,g){var d=function(a){var c;g.forEach(function(d){"number"===
typeof d&&0===d%1?c=d===a?d:c:1>d-a&&0<=d-a&&(c=d)});return c};"curved"===a.shape?c.series[0].axisLabel.formatter=d:"horizontal"===a.shape?c.xAxis.axisLabel.formatter=d:"vertical"===a.shape&&(c.yAxis.axisLabel.formatter=d);return c},_settingGaugeLabel:function(c,a){var g=a.min||0,d=a.max||100,k=[];a.gaugeOption&&a.gaugeOption.showTargetValueLabel&&("curved"===a.shape&&(c.series[0].splitNumber=c.series[0].max,c.series[0].axisTick.splitNumber=1,c.series[0].axisTick.show=!1),a.gaugeOption.targetValue&&
a.gaugeOption.targetValue.forEach(function(a){k.push(a)}));this.criticalValues=h.clone(k);a.gaugeOption&&a.gaugeOption.showDataRangeLabel&&(0>k.indexOf(g)&&(k.push(g),this.criticalValues.push({type:"min",value:g})),0>k.indexOf(d)&&(k.push(d),this.criticalValues.push({type:"max",value:d})));return"curved"===a.shape?this._showSpecialLabel(c,a,k):c}})})},"libs/echarts/light":function(){(function(n,h){"function"===typeof define&&define.amd?define(["exports","./echarts"],h):"object"===typeof exports&&
"string"!==typeof exports.nodeName?h(exports,require("./echarts")):h({},n.echarts)})(this,function(n,h){h?h.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},
radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},
itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},
splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",
handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(n,h){"function"===typeof define&&define.amd?define(["exports","./echarts"],h):"object"===typeof exports&&"string"!==typeof exports.nodeName?h(exports,require("./echarts")):h({},n.echarts)})(this,function(n,h){h?h.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),
textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{borderWidth:"1"}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"1"}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,
borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,
areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},
tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/utils".split(" "),
function(n,h,l,c,a,g,d,k,m,q,f,b,e,p){return n([m,q,f,k],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:b,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(d(this.multiColorSection,"click",h.hitch(this,function(b){b=b.target||b.srcElement;if(c.hasClass(b,"multi-color")&&!c.hasClass(b,"selected")){var a=this.multiColorValue;this._selectMultiColorDiv(b);a!==b.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=h.clone(this.config);p.combineRadioCheckBoxWithLabel(this.cbxAxisX,this.labelAxisX);p.combineRadioCheckBoxWithLabel(this.cbxAxisY,this.labelAxisY);p.combineRadioCheckBoxWithLabel(this.cbxPieLabel,
this.labelPie);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new e({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:h.hitch(this,function(b){var a=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(b);this.isInWidget&&a!==b&&this._configChange()})});this.palette.placeAt(this.paletteContainer);this.palette.startup();l.forEach(["c1","c2","c3","c4"],h.hitch(this,function(b){c.create("div",{"class":"multi-color colorful "+b},this.colorfulContainer).colorValue=
b}));l.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),h.hitch(this,function(b){c.create("div",{"class":"multi-color monochromatic "+b},this.monochromaticContainer).colorValue=b}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,c.setStyle(this.divAxisX,"display","none"),c.setStyle(this.divAxisY,"display","none")):c.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_bindEvents:function(){"pie"===this.type?this.own(d(this.cbxPieLabel,
"change",h.hitch(this,this._configChange))):(this.own(d(this.cbxAxisX,"change",h.hitch(this,this._configChange))),this.own(d(this.cbxAxisY,"change",h.hitch(this,this._configChange))))},setConfig:function(b){this.reset();this.cbxAxisX.checked=!1===b.showHorizontalAxis?!1:!0;this.cbxAxisY.checked=!1===b.showVerticalAxis?!1:!0;this.cbxPieLabel.checked=!1===b.showDataLabel?!1:!0;b=h.clone(b.colors||[]);(this.singleColor=1===b.length&&"pie"!==this.type)?this.showSingleColor(b[0]):this.showMultiColor(b)},
getConfig:function(){var b={colors:[]};"pie"===this.type?(b.colors=this.colors[this._getMultiColorValue()],2===b.colors.length&&(b.colors=this._createHexColors(b.colors[0],b.colors[1],6)),b.showDataLabel=this.cbxPieLabel.checked):(b.showHorizontalAxis=this.cbxAxisX.checked,b.showVerticalAxis=this.cbxAxisY.checked,b.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);return b},_setSingleColorForColorDiv:function(b){c.setStyle(this.colorDiv,"backgroundColor",
b);this.colorDiv.bgHex=b},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(b){(b=a("."+b,this.multiColorSection))&&0<b.length&&this._selectMultiColorDiv(b[0])},_selectMultiColorDiv:function(b){a(".multi-color",this.multiColorSection).removeClass("selected");c.addClass(b,"selected");this.multiColorValue=b.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.checked=!0:(this.cbxAxisX.checked=
!0,this.cbxAxisY.checked=!0);this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(b){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,c.setStyle(this.singleColorSection,"display","block"),c.setStyle(this.multiColorSection,"display","none"),b&&this._setSingleColorForColorDiv(b))},showMultiColor:function(b){this.singleColor=!1;c.setStyle(this.singleColorSection,"display","none");c.setStyle(this.multiColorSection,"display","block");if(b&&0<b.length){var a=
null,d=!1,f;for(f in this.colors)if(a=this.colors[f],d=!1,a.length===b.length&&(d=l.every(a,h.hitch(this,function(a,c){var d=new g(a),f=new g(b[c]);return d.toHex().toLowerCase()===f.toHex().toLowerCase()})))){this._setMultiColorValue(f);break}}},showShelter:function(){c.setStyle(this.shelter,"display","block")},hideShelter:function(){c.setStyle(this.shelter,"display","none")},_configChange:function(){var b=this.getConfig();this.emit("change",b)},_createHexColors:function(b,a,c){var d=[];b=g.fromHex(b);
var f=g.fromHex(a);a=(f.r-b.r)/(c-1);for(var e=(f.g-b.g)/(c-1),f=(f.b-b.b)/(c-1),k=null,h=0;h<c;h++)k=new g,k.r=Math.floor(b.r+a*h),k.g=Math.floor(b.g+e*h),k.b=Math.floor(b.b+f*h),d.push(k.toHex());return d}})})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ./utils".split(" "),function(n,h,l,c,a,g,d){return n([c],{templateString:'\x3cdiv style\x3d"height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"gauge"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",config:null,postCreate:function(){this.inherited(arguments);this.features=[];this.DEFAULT_GAUGE_CONFIG={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&(this.DEFAULT_GAUGE_CONFIG.shape=this.config.shape);this.isDarkTheme()?this.DEFAULT_GAUGE_CONFIG.theme="dark":this.DEFAULT_GAUGE_CONFIG.theme="light";this._initChart();this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},resize:function(a,
c){this.chart&&(a&&c?this.chart.resize(a,c):this.chart.resize())},_updateStatisticsValue:function(){if(this.config.statistic&&this.dataSource){var a=d.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features),a=this._getVaildValue(a);"number"===typeof a&&(this.value=a,this._setValue(this.config))}},setConfig:function(a){a&&(this.config=a,this.config.display&&this.config.display.backgroundColor&&l.setStyle(this.domNode,"backgroundColor",this.config.display.backgroundColor),this._updateStatisticsValue())},
_setValue:function(c){var d={};d.series=[{data:[this.value]}];var k=!1;"undefined"!==typeof c.max&&"undefined"!==typeof c.min&&(d.max=c.max,d.min=c.min);var f={},b=this._getIndicatorInfo(this.config);if(a.isNotEmptyObject(c.display)){var e=c.display;e.backgroundColor&&l.setStyle(this.domNode,"backgroundColor",e.backgroundColor);e.gaugeColor&&(f.columnColor=e.gaugeColor);e.bgColor&&(f.bgColor=e.bgColor);if(a.isNotEmptyObject(e.dataLabels)&&e.dataLabels.state){var g=e.dataLabels;f.showDataRangeLabel=
!!g.dataRange;f.showTargetValueLabel=!!g.targetValue;k=f.showTargetValueLabel;f.labelColor=g.textColor||""}if(a.isNotEmptyObject(e.currentValue)&&e.currentValue.state){var g=e.currentValue,e={},n=g.dataFormat;n&&""!==n.decimalPlaces&&"undefined"!==typeof n.decimalPlaces&&(e.decimalPlaces=Number(n.decimalPlaces));n=h.hitch(this,function(b,a){var d,f,e="";b.isRatio?(d=a/c.max,d*=100,e="%"):d=a;if(b.dataFormat){var k=b.dataFormat;b.isRatio||("percentage"===k.unit?(d*=100,e="%"):"thousand"===k.unit?(e=
this.nls.thousandAbbreviation,d/=1E3):"million"===k.unit?(e=this.nls.millionAbbreviation,d/=1E6):"billion"===k.unit&&(e=this.nls.billionAbbreviation,d/=1E9));""!==k.decimalPlaces&&"undefined"!==typeof k.decimalPlaces&&(d=d.toFixed(Number(k.decimalPlaces)));f=d+e;k.prefix&&(f=k.prefix+" "+f);k.suffix&&(f+=" "+k.suffix)}return f},g,this.value);e.formatter=n;g.font&&(n={},"undefined"!==typeof g.font.fontSize&&(n.fontSize=Number(g.font.fontSize)),g.font.textColor&&(n.color=g.font.textColor),b.valueColor&&
(n.color=b.valueColor),g.font&&g.font.font&&(g=g.font.font,n.fontWeight=g.bold?"bold":"normal",g.fontFamily&&(n.fontFamily=g.fontFamily),n.fontStyle=g.italic?"italic":"normal"),e.textStyle=n);f.valueStyle=e}}b.targetValue&&(f.targetValue=k?b.targetValue:[]);b.columnColor&&(f.columnColor=b.columnColor);d.gaugeOption=f;this.chart.updateConfig(d)},_getIndicatorInfo:function(c){var k=!1,g=!1,f=!1,b=this._getIndicatorValues(c);a.isNotEmptyObject(b,!0)&&(k=b);if(b=c.indicators)(c=d.getVaildIndicator(this.value,
b,c.max))&&c.gaugeColor&&(g=c.gaugeColor),c&&c.valueColor&&(f=c.valueColor);return{targetValue:k,columnColor:g,valueColor:f}},_initChart:function(){this.chart=new g({chartDom:this.domNode,config:this.DEFAULT_GAUGE_CONFIG});this.chart.placeAt(this.domNode);setTimeout(h.hitch(this,function(){this.chart.resize()}),300)},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},_getIndicatorValues:function(c){var d=[];c.indicators&&(c.indicators.forEach(function(a){a.value&&a.value.forEach(h.hitch(this,
function(f){d.push(a.isRatio?f/100*c.max:f)}))}),d.sort(function(a,c){return a-c}),d=a.uniqueArray(d));return d}})})},"widgets/Infographic/dijits/utils":function(){define("dojo/on dojo/_base/lang dojo/_base/array esri/geometry/geometryEngine jimu/DataSourceManager jimu/statisticsUtils".split(" "),function(n,h,l,c,a,g){return{getClientFeaturesFromMap:function(a,c,g,h){var d=[],d=g?0<c.getSelectedFeatures().length?c.getSelectedFeatures():c.graphics:c.graphics;h&&(d=this._filterFeaturesByExtent(a.extent,
d));return d},listenClientFeaturesFromMap:function(a,c,g,q,f){var b=[];g&&(b.push(n(c,"selection-complete",h.hitch(this,function(){f(this.getClientFeaturesFromMap(a,c,g,q))}))),b.push(n(c,"selection-clear",h.hitch(this,function(){f(this.getClientFeaturesFromMap(a,c,g,q))}))));q&&b.push(n(a,"extent-change",h.hitch(this,function(){0<c.graphics.length&&f(this.getClientFeaturesFromMap(a,c,g,q))})));b.push(n(c,"update-end",h.hitch(this,function(){f(this.getClientFeaturesFromMap(a,c,g,q))})));f(this.getClientFeaturesFromMap(a,
c,g,q));return{remove:function(){b&&l.forEach(b,h.hitch(this,function(b){b.remove()}));b=null}}},getVaildIndicator:function(a,c,g){var d=[];c.map(h.hitch(this,function(c){(c=this._handleOperator(c,a,g))&&d.push(c)}));if(0<d.length)return d[d.length-1]},getSingleValueFromFeatures:function(c,g,h){var d=a.getInstance(),f=0;if("Features"===c.type){if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===g.dataSourceType||"Features"===d.getDataSourceConfig(g.frameWorkDsId).type)return h.length;f=0;l.forEach(h,function(b){f+=
b.attributes.count});return f}if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===g.dataSourceType||"Features"===d.getDataSourceConfig(g.frameWorkDsId).type)return this._getStatsFromFeatures(h,c.fieldName,c.statisticsType);var b=0,e=0,f=0;l.forEach(h,function(a){var d=a.attributes[c.fieldName+"_"+c.statisticsType];switch(c.statisticsType){case "sum":b+=d;break;case "min":b=Math.min(b,d);break;case "max":b=Math.max(b,d);break;case "avg":e+=a.attributes[c.fieldName+"_sum"],f+=a.attributes.count}});"avg"===c.statisticsType&&
(b=0===f?0:e/f);return b},filterFeaturesByDataSourceSetting:function(a,c,g){if(0===a.length)return[];if(c.useSelection){var d=a[0].getLayer();if(d){var f=d.getSelectedFeatures();0<f.length&&(a=l.filter(a,function(b){return-1<f.indexOf(b)}))}}c.filterByExtent&&(a=this._filterFeaturesByExtent(g.extent,a));return a},_getStatsFromFeatures:function(a,c,h){return g.getStatisticsResultFromClientSync({featureSet:{features:a},fieldName:c,statisticTypes:[h]})[h+"Field"]},_filterFeaturesByExtent:function(a,
g){var d=a.normalize();return g=l.filter(g,h.hitch(this,function(a){try{if(a.geometry){var f="point"===a.geometry.type||"multipoint"===a.geometry;return l.some(d,h.hitch(this,function(b){return f?b.contains(a.geometry):c.intersects(b,a.geometry)}))}}catch(b){console.error(b)}return!1}))},_handleOperator:function(a,c,g){function d(b){f={};b.valueColor&&(f.valueColor=b.valueColor);b.gaugeColor&&(f.gaugeColor=b.gaugeColor);b.iconInfo&&(f.iconInfo=b.iconInfo)}var f,b=a.value.map(h.hitch(this,function(b){return a.isRatio?
b/100*g:b}));"greater"===a.operator&&c>b[0]?d(a):"smaller"===a.operator&&c<b[0]?d(a):"between"===a.operator&&c>b[0]&&c<b[1]?d(a):"equal"===a.operator&&c===b[0]?d(a):"notEqual"===a.operator&&c!==b[0]&&d(a);return f},isInteger:function(a){return"number"===typeof a&&0===a%1}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare dojo/_base/lang ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ./utils ./styleUtils jimu/LayerInfos/LayerInfos jimu/DataSourceManager".split(" "),
function(n,h,l,c,a,g,d,k,m,q){return n([l],{templateString:'\x3cdiv style\x3d"height:100%;width:100%;"\x3e\x3ca data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,postCreate:function(){this.inherited(arguments);this.value=this.features=null;this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},setDataSource:function(a){this.dataSource=a;if(a.layerId){var b=m.getInstanceSync().getLayerInfoById(a.layerId);b&&b.getLayerObject().then(h.hitch(this,function(b){this.features=d.getClientFeaturesFromMap(this.map,b,a.useSelection,a.filterByExtent);
this._updateStatisticsValue()}))}else a.frameWorkDsId&&(b=q.getInstance().getData(a.frameWorkDsId))&&(this.features=b.features,this._updateStatisticsValue())},_updateStatisticsValue:function(){this.value=this.features&&this.config.statistic&&this.dataSource?d.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features):null;this._updateUI(this.config,this.value)},setConfig:function(c){c&&c.background&&c.background.backgroundColor?a.setStyle(this.domNode,"backgroundColor",c.background.backgroundColor):
a.setStyle(this.domNode,"backgroundColor","#FFFFFF");this.config=c;this._updateStatisticsValue()},_updateUI:function(a,b){this._cleanUI();this.config=a;this.valueContent.innerHTML=null===b?this.nls.noData:b;g.isNotEmptyObject(this.config)&&this._setValueDisplay(this.config)},_setValueDisplay:function(a){a&&(this._setBackground(a),this._setFont(a),"undefined"!==typeof this.value&&(this._setDataFormat(a),a=this._getIndicatorColor(),a.color&&this._setValueColor(a.color),a.icon&&this._setIndicatorIcon(a.icon)))},
_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(d){var b=a.create("div",{"class":"indicator-icon "+d.icon});a.empty(this.valueContent);a.place(b,this.valueContent);c.set(b,"color",d.color);c.set(b,"display","inline-flex")},_setLeftRightIcon:function(d){var b;"left"===d.placement?b=this.leftIcon:"right"===d.placement&&(b=this.rightIcon);a.addClass(b,"indicator-icon "+
d.icon);c.set(b,"color",d.color)},_getIndicatorColor:function(){var a=!1,b=!1,c=this.config.indicators;c&&((c=d.getVaildIndicator(this.value,c))&&c.valueColor&&(a=c.valueColor),c&&g.isNotEmptyObject(c.iconInfo)&&(b=c.iconInfo));return{color:a,icon:b}},_setFont:function(c){if(c&&c.font){var b={};k.font.setStyle(c.font,b);a.setStyle(this.number,b)}},_setDataFormat:function(a){if(this.value&&a&&a.dataFormat){var b=this.value,c="";a=a.dataFormat;"percentage"===a.unit?(b*=100,c="%"):"thousand"===a.unit?
(c=this.nls.thousandAbbreviation,b/=1E3):"million"===a.unit?(c=this.nls.millionAbbreviation,b/=1E6):"billion"===a.unit&&(c=this.nls.billionAbbreviation,b/=1E9);""!==a.decimalPlaces&&"undefined"!==typeof a.decimalPlaces&&(b=b.toFixed(Number(a.decimalPlaces)));this.valueContent.innerHTML=b+c;a.prefix&&(this.prefix.innerHTML=a.prefix);a.suffix&&(this.suffix.innerHTML=a.suffix)}},_cleanUI:function(){a.removeClass(this.leftIcon);a.addClass(this.leftIcon,["icon"]);a.removeClass(this.rightIcon);a.addClass(this.rightIcon,
["icon"]);this.replaceIcon&&(a.destroy(this.replaceIcon),this.replaceIcon=null);a.empty(this.valueContent);a.empty(this.prefix);a.empty(this.suffix);this._setValueColor("")},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},_setBackground:function(c){if(c&&c.background){c=c.background;c.backgroundColor&&a.setStyle(this.domNode,"backgroundColor",c.backgroundColor);if(c.alignment){var b=c.alignment;a.removeClass(this.domNode);a.addClass(this.domNode,"infographic-number-dijit");
b.horizontal&&a.addClass(this.domNode,"horizontal-"+b.horizontal);b.vertical&&a.addClass(this.domNode,"vertical-"+b.vertical)}c.link?a.setAttr(this.numberContent,"href",c.link):a.removeAttr(this.numberContent,"href")}},_setValueColor:function(a){c.set(this.number,"color",a)}})})},"widgets/Infographic/_ChartSetting":function(){define(["dojo/_base/declare","dojo/_base/html","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./_ChartSetting.html"],function(n,h,l,c,a){return n([l,c],{templateString:a,
baseClass:"ig-chart-setting-dlg",postCreate:function(){"pie"===this.chartJson.config.type?(h.setStyle(this.verticalAxisSection,"display","none"),h.setStyle(this.horizontalAxisSection,"display","none")):h.setStyle(this.dataLabelsSection,"display","none");this.chartJson.config.showLegend&&this._toggle(this.legendToggle);this.chartJson.config.showDataLabel&&this._toggle(this.dataLabelsToggle);this.chartJson.config.showHorizontalAxis&&this._toggle(this.horizontalAxisToggle);this.chartJson.config.showVerticalAxis&&
this._toggle(this.verticalAxisToggle)},_toggle:function(a){h.hasClass(a,"toggle-on")?(h.removeClass(a,"toggle-on"),h.addClass(a,"toggle-off")):(h.removeClass(a,"toggle-off"),h.addClass(a,"toggle-on"))},_onToggleClick:function(a){var c=a.target;this._toggle(c);a=h.hasClass(c,"toggle-on")?!0:!1;c=h.attr(c,"data-id");"legend"===c?this.chartJson.config.showLegend=a:"dataLabels"===c?this.chartJson.config.showDataLabel=a:"horizontalAxis"===c?this.chartJson.config.showHorizontalAxis=a:"verticalAxis"===c&&
(this.chartJson.config.showVerticalAxis=a);this.chartDijit.setConfig(this.chartJson.config)}})})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"settings jimu-float-trailing" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer" dir\x3d"ltr"\r\n\t\t\t\t\t\tstyle\x3d"direction:ltr;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisX" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisX"\x3e${nls.horizontalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisY" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisY"\x3e${nls.verticalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxPieLabel" type\x3d"checkbox" checked /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelPie"\x3e${nls.dataLabels}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\x3c/div\x3e',"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.infographic-chart-dijit {position: relative;}.infographic-chart-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: 50%; margin: -15px; text-align: center; color: #666;}.infographic-chart-dijit.no-data .no-data-tip {display: block;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/Toggle_On.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/Toggle_Off.svg);}',
"*now":function(n){n(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/DataSourceManager jimu/LayerInfos/LayerInfos ./DijitFactory ./dijits/utils ./_ChartSetting".split(" "),function(n,h,l,c,a,g,d,k,m,q,f,b,e,p,r){return n([m,g],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,clientFeaturesHandle:null,layerInfosObj:null,postCreate:function(){this.inherited(arguments);
this.dijits=[];this.layerInfosObj=b.getInstanceSync();e.setNls(this.nls);e.setMap(this.map);e.setInSettingPage(!1);e.setAppConfig(this.appConfig);e.setContext({folderUrl:this.folderUrl});this.on("click",h.hitch(this,function(){this.chartSettingDialog&&d.close(this.chartSettingDialog)}))},startup:function(){this.inherited(arguments);this._createUI();this._createChartSettingBtn()},onOpen:function(){if(this.config.dataSource)if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===this.config.dataSource.dataSourceType){var a=
this.layerInfosObj.getLayerInfoById(this.config.dataSource.layerId);a&&a.getLayerObject().then(h.hitch(this,function(a){a&&(this.clientFeaturesHandle=p.listenClientFeaturesFromMap(this.map,a,this.config.dataSource.useSelection,this.config.dataSource.filterByExtent,h.hitch(this,this._onClientFeaturesUpdate)))}))}else"DATA_SOURCE_FROM_FRAMEWORK"===this.config.dataSource.dataSourceType&&(a=f.getInstance().getData(this.config.dataSource.frameWorkDsId))&&this._onDataUpdate(a)},onClose:function(){this._releaseHanlde();
this.chartSettingDialog&&this.chartSettingDialog.isShow&&(d.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1)},destroy:function(){this._releaseHanlde();this.chartSettingDialog&&(this.chartSettingDialog.destroy(),this.chartSettingDialog=null);this.inherited(arguments)},_releaseHanlde:function(){this.clientFeaturesHandle&&this.clientFeaturesHandle.remove();this.clientFeaturesHandle=null},_createUI:function(){if(this.config.layout){l.forEach(this.dijits,h.hitch(this,function(a){a.destroy()}));
this.dijits=[];var a=l.map(this.config.dijits,function(a){var b=e.createDijit(a);b.setDataSource(this.config.dataSource);this.dijits.push(b);return{id:a.id,dijit:b}},this);this.layout=new q({components:a,layoutDefinition:this.config.layout.definition,container:this.domNode,editable:!1});this.layout.on("initialised",h.hitch(this,function(){l.forEach(this.dijits,h.hitch(this,function(a){a.startup()}))}))}},_createChartSettingBtn:function(){this.config.dijits&&l.some(this.config.dijits,function(a){return a.visible&&
"chart"===a.type},this)&&(this.chartSettingNode=c.create("div",{"class":"chart-setting"},this.domNode),this.own(a(this.chartSettingNode,"click",h.hitch(this,this._onChartSettingClick))),this.chartSettingDialog=new k({content:this._createChartSettingContent()}),this.chartSettingDialog.isShow=!1)},_onChartSettingClick:function(a){this.chartSettingDialog.isShow?(d.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1):(d.open({popup:this.chartSettingDialog,around:this.chartSettingNode}),this.chartSettingDialog.isShow=
!0);a.stopPropagation()},_createChartSettingContent:function(){var a=l.filter(this.config.dijits,function(a){return"chart"===a.type})[0];return a?a.config?(new r({chartJson:a,chartDijit:l.filter(this.dijits,function(b){return b.jsonId===a.id})[0],nls:this.nls})).domNode:"\x3cdiv\x3e\x3c/div\x3e":(console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e")},onDataSourceDataUpdate:function(a,b){this.config.dataSource&&a===this.config.dataSource.frameWorkDsId&&(b.features=p.filterFeaturesByDataSourceSetting(b.features,
this.config.dataSource,this.map),this._onDataUpdate(b))},_onClientFeaturesUpdate:function(a){this._onDataUpdate({features:a})},_onDataUpdate:function(a){l.forEach(this.dijits,h.hitch(this,function(b){b.onDataSourceDataUpdate(a)}))},resize:function(){this.inherited(arguments);this.layout&&this.layout.resize()}})});